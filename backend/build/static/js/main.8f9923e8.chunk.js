(this["webpackJsonpcrm-call-center"]=this["webpackJsonpcrm-call-center"]||[]).push([[0],{336:function(e,t,a){e.exports=a(563)},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},562:function(e,t,a){},563:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(301),o=a.n(l),i=(a(343),a(103)),c=a(12);a(344);var d=function(){const[e,t]=Object(n.useState)(""),[a,l]=Object(n.useState)(""),[o,d]=Object(n.useState)("operateur"),[s,m]=Object(n.useState)(""),p=Object(c.p)();return r.a.createElement("div",{className:"login-bg"},r.a.createElement("div",{className:"login-modal"},r.a.createElement("div",{className:"login-brand-title"},"Bienvenue sur ",r.a.createElement("span",{className:"login-brand-main"},"C-",r.a.createElement("span",{className:"login-brand-accent"},"INNOVATECH")," SOLUTIONS")),r.a.createElement("h2",null,"Se connecter"),s&&r.a.createElement("div",{className:"error-message"},s),r.a.createElement("form",{onSubmit:t=>{t.preventDefault(),"operateur"===o&&"operateur"===e.trim()&&"call123"===a?(m(""),p("/operateur")):"admin"===o&&"admin"===e.trim()&&"admin123"===a?(m(""),p("/admin")):m("Login ou mot de passe incorrect")},autoComplete:"off"},r.a.createElement("div",{className:"input-row"},r.a.createElement("div",null,r.a.createElement("label",null,"Se connecter"),r.a.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,autoComplete:"username"})),r.a.createElement("div",null,r.a.createElement("label",null,"Mot de passe"),r.a.createElement("input",{type:"password",value:a,onChange:e=>l(e.target.value),required:!0,autoComplete:"current-password"}))),r.a.createElement("div",{className:"role-row"},r.a.createElement("label",null,"Se connecter en tant que :"),r.a.createElement("select",{value:o,onChange:e=>d(e.target.value),className:"role-select"},r.a.createElement("option",{value:"operateur"},"Op\xe9rateur"),r.a.createElement("option",{value:"admin"},"Admin"))),r.a.createElement("button",{className:"send-btn",type:"submit"},"Envoyer")),r.a.createElement("div",{className:"login-links"},r.a.createElement(i.b,{to:"/register",className:"link-button"},"Inscrivez-vous")," | ",r.a.createElement("button",{className:"link-button",type:"button",onClick:()=>alert("Fonctionnalit\xe9 \xe0 venir")},"Mot de passe oubli\xe9 ?"))))},s=a(13);a(345);var m=function(){const[e,t]=Object(n.useState)({nom:"",prenom:"",email:"",telephone:"",experience:"non",role:"operateur"}),[a,l]=Object(n.useState)(null),[o,i]=Object(n.useState)(""),[d,m]=Object(n.useState)(!1),p=Object(c.p)(),u=e=>{const{name:a,value:n}=e.target;t(e=>Object(s.a)(Object(s.a)({},e),{},{[a]:n}))};return r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"register-form-container"},r.a.createElement("h2",null,"Inscription"),o&&r.a.createElement("div",{className:"error-message"},o),d&&r.a.createElement("div",{className:"success-message"},"Votre demande d'inscription a \xe9t\xe9 envoy\xe9e avec succ\xe8s. Un administrateur vous contactera bient\xf4t."),r.a.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),a)try{const t=new FormData;Object.keys(e).forEach(a=>{t.append(a,e[a])}),t.append("passeportFile",a);const n=await fetch("http://localhost:5001/api/register",{method:"POST",body:t});if(n.ok)m(!0),setTimeout(()=>{p("/")},3e3);else{const e=await n.json();i(e.message||"Une erreur est survenue")}}catch(n){i("Une erreur est survenue lors de l'envoi du formulaire")}else i("Veuillez t\xe9l\xe9charger votre passeport en PDF")},className:"register-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nom"},"Nom"),r.a.createElement("input",{type:"text",id:"nom",name:"nom",value:e.nom,onChange:u,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"prenom"},"Pr\xe9nom"),r.a.createElement("input",{type:"text",id:"prenom",name:"prenom",value:e.prenom,onChange:u,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Adresse email"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:e.email,onChange:u,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"telephone"},"Num\xe9ro WhatsApp"),r.a.createElement("input",{type:"tel",id:"telephone",name:"telephone",value:e.telephone,onChange:u,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"passeportFile"},"Passeport (PDF)"),r.a.createElement("input",{type:"file",id:"passeportFile",name:"passeportFile",onChange:e=>{const t=e.target.files[0];if(t){if("application/pdf"!==t.type)return i("Veuillez s\xe9lectionner un fichier PDF"),void(e.target.value=null);if(t.size>5242880)return i("Le fichier est trop volumineux. Taille maximale: 5MB"),void(e.target.value=null);l(t),i("")}},accept:".pdf",required:!0}),r.a.createElement("small",{className:"file-info"},"Format accept\xe9: PDF. Taille maximale: 5MB")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"experience"},"Exp\xe9rience de travail"),r.a.createElement("select",{id:"experience",name:"experience",value:e.experience,onChange:u,required:!0},r.a.createElement("option",{value:"non"},"Non"),r.a.createElement("option",{value:"oui"},"Oui"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"role"},"R\xf4le"),r.a.createElement("select",{id:"role",name:"role",value:e.role,onChange:u,required:!0},r.a.createElement("option",{value:"operateur"},"Op\xe9rateur"),r.a.createElement("option",{value:"admin"},"Admin"))),r.a.createElement("button",{type:"submit",className:"submit-button"},"Envoyer la demande"),r.a.createElement("button",{type:"button",className:"back-button",onClick:()=>p("/")},"Retour \xe0 la connexion"))))};a(346);const p=[{label:"Connect\xe9",color:"#4caf50",max:72e3},{label:"Hors ligne",color:"#bdbdbd"},{label:"Pause",color:"#ffb300",max:5400},{label:"Formation",color:"#1976d2"}],u=["Appel sans r\xe9ponse","Rappel","Validation","Refus","Poubelle"],g=["Principal","Demandes","Contacts suppl\xe9mentaires","Panier"];function f(){const e=new Date;return e.setDate(e.getDate()+2),e.toISOString().split("T")[0]}function E(){const e=new Date;let t=0;for(;t<5;)e.setDate(e.getDate()+1),0!==e.getDay()&&6!==e.getDay()&&t++;return e.toISOString().split("T")[0]}var b=function(){const[e,t]=Object(n.useState)("Principal"),[a,l]=Object(n.useState)("Connect\xe9"),[o,i]=Object(n.useState)({"Connect\xe9":0,"Hors ligne":0,Pause:0,Formation:0}),c=Object(n.useRef)(),[d,m]=Object(n.useState)("ringing"),[b,x]=Object(n.useState)(0),h=Object(n.useRef)(),[y,v]=Object(n.useState)(u[0]),[S,O]=Object(n.useState)({name:"",phone:"06 12 34 56 78"}),[j,C]=Object(n.useState)({rue:"",numero:"",codePostal:"",ville:"",region:"",appartement:"",etage:"",entree:""}),[k,N]=Object(n.useState)([{produit:"",prix:"",quantite:"",frais:"",tva:""}]),[w,W]=Object(n.useState)(!1),[D,R]=Object(n.useState)(!1),[q,z]=Object(n.useState)(0),B=Object(n.useRef)(),[T,I]=Object(n.useState)([]),[P,L]=Object(n.useState)(!1),[A,F]=Object(n.useState)(""),[M,V]=Object(n.useState)(""),[Y,J]=Object(n.useState)(""),[H,U]=Object(n.useState)(""),[Q,_]=Object(n.useState)(""),[K,X]=Object(n.useState)(""),[G,Z]=Object(n.useState)([]),[$,ee]=Object(n.useState)(!0),[te,ae]=Object(n.useState)(null);Object(n.useEffect)(()=>{async function e(){ee(!0),ae(null);try{const e=await fetch("/api/orders");if(!e.ok)throw new Error("API non disponible");const t=await e.json();Z(t)}catch(e){ae("Impossible de contacter le serveur des commandes. V\xe9rifiez que le backend est bien lanc\xe9.")}ee(!1)}e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]),Object(n.useEffect)(()=>(clearInterval(c.current),c.current=setInterval(()=>{i(e=>Object(s.a)(Object(s.a)({},e),{},{[a]:e[a]+1}))},1e3),()=>clearInterval(c.current)),[a]),Object(n.useEffect)(()=>("in-call"===d?h.current=setInterval(()=>{x(e=>e+1)},1e3):(clearInterval(h.current),x(0)),()=>clearInterval(h.current)),[d]),Object(n.useEffect)(()=>("ended"===d?(R(!0),z(0),B.current=setInterval(()=>{z(e=>e+1)},1e3)):(R(!1),z(0),clearInterval(B.current)),()=>clearInterval(B.current)),[d]),Object(n.useEffect)(()=>{w&&(R(!1),z(0),clearInterval(B.current))},[w]),Object(n.useEffect)(()=>{X("Validation"===y?function(){const e=new Date,t=Math.floor(2*Math.random())+2,a=new Date(e);return a.setDate(e.getDate()+t),a.toISOString().split("T")[0]}():"")},[y]),Object(n.useEffect)(()=>{"Validation"!==y&&X("")},[y]);const ne=e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a)},re=(e,t,a)=>{const n=k.map((n,r)=>r===e?Object(s.a)(Object(s.a)({},n),{},{[t]:a}):n);N(n)};return r.a.createElement("div",{className:"crm-legacy-container"},r.a.createElement("div",{className:"crm-header-bar"},r.a.createElement("div",{className:"crm-tabs"},g.map(a=>r.a.createElement("div",{key:a,className:"crm-tab".concat(e===a?" active":""),onClick:()=>t(a)},a))),r.a.createElement("button",{className:"btn-logout",onClick:()=>{window.location.href="/"}},"D\xe9connexion")),r.a.createElement("div",{className:"crm-brand"},r.a.createElement("span",{className:"crm-brand-main"},"C-",r.a.createElement("span",{className:"crm-brand-accent"},"INNOVATECH")," Solutions")),r.a.createElement("div",{className:"crm-legacy-content"},"Panier"===e?r.a.createElement("div",{style:{maxWidth:950,margin:"0 auto",textAlign:"left",background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.07)",padding:"32px 28px 24px 28px",border:"1.5px solid #e0e0e0"}},r.a.createElement("h2",{style:{fontWeight:800,fontSize:"1.6rem",marginBottom:32,textAlign:"center",letterSpacing:1}},"Mes commandes"),te&&r.a.createElement("div",{style:{color:"#e53935",marginBottom:16,padding:12,background:"#ffebee",borderRadius:8,border:"1px solid #ffcdd2"}},te),r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,fontSize:"0.99rem",background:"#fff",borderRadius:10}},r.a.createElement("thead",null,r.a.createElement("tr",{style:{background:"#f7f8fa"}},r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"ID"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Client"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Produit"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Date"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Statut"))),r.a.createElement("tbody",null,G.map(e=>r.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #f0f0f0"}},r.a.createElement("td",{style:{padding:"12px 8px"}},e.id),r.a.createElement("td",{style:{padding:"12px 8px"}},e.nom," ",e.prenom),r.a.createElement("td",{style:{padding:"12px 8px"}},e.produit),r.a.createElement("td",{style:{padding:"12px 8px"}},new Date(e.date).toLocaleDateString("fr-FR")),r.a.createElement("td",{style:{padding:"12px 8px"}},r.a.createElement("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:"0.9rem",fontWeight:600,background:"En attente"===e.statut?"#fff3e0":"Valid\xe9e"===e.statut?"#e8f5e9":"Exp\xe9di\xe9e"===e.statut?"#e3f2fd":"Livr\xe9e"===e.statut?"#f3e5f5":"#ffebee",color:"En attente"===e.statut?"#e65100":"Valid\xe9e"===e.statut?"#2e7d32":"Exp\xe9di\xe9e"===e.statut?"#1565c0":"Livr\xe9e"===e.statut?"#6a1b9a":"#c62828"}},e.statut)))))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{minWidth:320,maxWidth:340,marginRight:32}},r.a.createElement("div",{className:"phonecall-box"},r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:10}},r.a.createElement("span",{style:{fontSize:"2rem",color:"#e53935"}},"\u23f0"),r.a.createElement("span",{style:{fontWeight:"bold",color:"#e53935"}},"Appel entrant...")),"ringing"===d&&r.a.createElement("div",{style:{marginTop:12,display:"flex",gap:12}},r.a.createElement("button",{className:"btn-phonecall green big",onClick:()=>m("in-call")},"D\xe9crocher"),r.a.createElement("button",{className:"btn-phonecall red big",onClick:()=>m("ended")},"Raccrocher")),"in-call"===d&&r.a.createElement("div",{style:{marginTop:12}},r.a.createElement("span",{className:"phonecall-inprogress-label"},"En appel\u2026"),r.a.createElement("span",{className:"phonecall-timer"},ne(b)),r.a.createElement("button",{className:"btn-phonecall red big",style:{marginLeft:18},onClick:()=>m("ended")},"Raccrocher")),"ended"===d&&r.a.createElement("div",{style:{marginTop:12}},r.a.createElement("span",{className:"phonecall-ended"},"Appel termin\xe9"),r.a.createElement("button",{className:"btn-newcall",style:{marginLeft:18},onClick:()=>m("ringing")},"Simuler un appel"))),r.a.createElement("div",{className:"crm-controls-block-belowcall"},r.a.createElement("div",{className:"crm-section-title"},"Contr\xf4le"),r.a.createElement("div",{className:"crm-controls"},p.map(e=>{const t=o[e.label]||0,n=a===e.label,i=e.max&&t>=e.max;return r.a.createElement("button",{key:e.label,type:"button",className:"btn-control ".concat(e.label.normalize("NFD").replace(/[\x00-\u036f]/g,"").toLowerCase().replace(/ /g,"")).concat(n?" selected":""),onClick:()=>l(e.label)},e.label,r.a.createElement("span",{className:"status-timer".concat(i?" late":"")},(e=>{const t=Math.floor(e/3600).toString().padStart(2,"0"),a=Math.floor(e%3600/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a,":").concat(n)})(t)),i&&"Pause"===e.label&&r.a.createElement("span",{className:"status-warning"},"\u23f0 max 1h30 !"),i&&"Connect\xe9"===e.label&&r.a.createElement("span",{className:"status-warning"},"\u23f0 max 20h !"))})))),r.a.createElement("form",{className:"crm-form",onSubmit:async e=>{var t,a,n;if(e.preventDefault(),_(""),"Validation"===y&&!K)return void _("Veuillez choisir la date de livraison.");if("Rappel"===y){if(!M)return void _("Veuillez choisir la date et l'heure du rappel.");const e=new Date,t=(new Date(M)-e)/864e5;if(t<0||t>3)return void _("La date de rappel doit \xeatre dans les 3 jours \xe0 venir.")}if("Refus"===y&&!Y.trim())return void _("Veuillez indiquer la raison du refus.");if("Poubelle"===y&&!H.trim())return void _("Veuillez indiquer la raison pour la poubelle.");const r=(new Date).getTime(),l=Math.floor(1e3*Math.random()),o={id:"CMD".concat(r).concat(l),nom:S.name.split(" ")[0]||"",prenom:S.name.split(" ").slice(1).join(" ")||"",phone:S.phone,adresse:Object.values(j).filter(Boolean).join(", "),date:K||(new Date).toISOString().split("T")[0],produit:(null===(t=k[0])||void 0===t?void 0:t.produit)||"",quantite:parseInt(null===(a=k[0])||void 0===a?void 0:a.quantite)||1,prix:parseFloat(null===(n=k[0])||void 0===n?void 0:n.prix)||0,statut:"Validation"===y?"Valid\xe9e":"En attente",logistique:!1,operateur:"Op\xe9rateur",canal:"T\xe9l\xe9phone",historique:[{date:(new Date).toISOString().split("T")[0],action:"Cr\xe9ation",utilisateur:"Op\xe9rateur"}]};try{const e=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok){const t=await e.json();throw new Error(t.error||"Erreur lors de l'enregistrement de la commande")}const t=await e.json();Z(e=>[...e,t]),W(!0),_(""),setTimeout(()=>W(!1),2e3),m("ringing"),V(""),J(""),U(""),X(""),N([{produit:"",prix:"",quantite:"",frais:"",tva:""}])}catch(i){console.error("Erreur lors de l'enregistrement:",i),_(i.message||"Erreur lors de l'enregistrement de la commande. Veuillez r\xe9essayer.")}}},r.a.createElement("div",{className:"crm-section-flex"},r.a.createElement("div",{className:"crm-section-block"},r.a.createElement("div",{className:"crm-section-title"},"Informations client"),r.a.createElement("div",{className:"crm-grid-2"},r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Nom et pr\xe9nom"),r.a.createElement("input",{type:"text",value:S.name,onChange:e=>O(Object(s.a)(Object(s.a)({},S),{},{name:e.target.value}))})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Num\xe9ro de t\xe9l\xe9phone"),r.a.createElement("input",{type:"text",value:S.phone,onChange:e=>O(Object(s.a)(Object(s.a)({},S),{},{phone:e.target.value}))}))))),r.a.createElement("div",{className:"crm-section-block"},r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12}},r.a.createElement("div",{className:"crm-section-title",style:{marginBottom:0}},"Adresse de livraison"),r.a.createElement("div",{className:"crm-field",style:{minWidth:220,width:280,marginBottom:0,position:"relative"}},r.a.createElement("label",{style:{display:"none"}},"Rechercher une adresse"),r.a.createElement("input",{type:"text",value:A,onChange:e=>{F(e.target.value),(async e=>{if(e.length<3)I([]);else try{const t=await fetch("https://api-adresse.data.gouv.fr/search/?q=".concat(encodeURIComponent(e),"&limit=5")),a=await t.json();I(a.features||[]),L(!0)}catch(t){console.error("Erreur lors de la recherche d'adresse:",t),I([])}})(e.target.value)},placeholder:"Rechercher une adresse...",style:{width:"100%"}}),P&&T.length>0&&r.a.createElement("div",{className:"address-suggestions"},T.map((e,t)=>r.a.createElement("div",{key:t,className:"suggestion-item",onClick:()=>(e=>{const t=e.properties;C(Object(s.a)(Object(s.a)({},j),{},{numero:t.housenumber||"",rue:t.street||"",codePostal:t.postcode||"",ville:t.city||"",region:t.context||""})),F("".concat(t.housenumber||""," ").concat(t.street||"",", ").concat(t.postcode||""," ").concat(t.city||"")),L(!1)})(e)},e.properties.label))))),r.a.createElement("div",{className:"crm-grid-4"},r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Rue"),r.a.createElement("input",{type:"text",value:j.rue,readOnly:!0})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Num\xe9ro"),r.a.createElement("input",{type:"text",value:j.numero,readOnly:!0})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Code postal"),r.a.createElement("input",{type:"text",value:j.codePostal,readOnly:!0})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Ville"),r.a.createElement("input",{type:"text",value:j.ville,readOnly:!0}))),r.a.createElement("div",{className:"crm-grid-3"},r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"R\xe9gion"),r.a.createElement("input",{type:"text",value:j.region,onChange:e=>C(Object(s.a)(Object(s.a)({},j),{},{region:e.target.value}))})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Appartement"),r.a.createElement("input",{type:"text",value:j.appartement,onChange:e=>C(Object(s.a)(Object(s.a)({},j),{},{appartement:e.target.value}))})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Entr\xe9e"),r.a.createElement("input",{type:"text",value:j.entree,onChange:e=>C(Object(s.a)(Object(s.a)({},j),{},{entree:e.target.value}))})))),r.a.createElement("div",{className:"crm-section-block"},r.a.createElement("div",{className:"crm-section-title"},"Statut apr\xe8s l'appel"),r.a.createElement("div",{className:"crm-field",style:{maxWidth:"300px"}},r.a.createElement("select",{value:y,onChange:e=>v(e.target.value)},u.map(e=>r.a.createElement("option",{key:e},e)))),"Rappel"===y&&r.a.createElement("div",{className:"crm-field",style:{maxWidth:320}},r.a.createElement("label",null,"Date et heure du rappel (dans les 3 jours)"),r.a.createElement("input",{type:"datetime-local",value:M,min:(new Date).toISOString().slice(0,16),max:(()=>{const e=new Date;return e.setDate(e.getDate()+3),e.toISOString().slice(0,16)})(),onChange:e=>V(e.target.value)})),"Refus"===y&&r.a.createElement("div",{className:"crm-field",style:{maxWidth:320}},r.a.createElement("label",null,"Raison du refus"),r.a.createElement("input",{type:"text",value:Y,onChange:e=>J(e.target.value),placeholder:"Indiquez la raison du refus"})),"Poubelle"===y&&r.a.createElement("div",{className:"crm-field",style:{maxWidth:320}},r.a.createElement("label",null,"Raison pour la poubelle"),r.a.createElement("input",{type:"text",value:H,onChange:e=>U(e.target.value),placeholder:"Indiquez la raison"})),"Validation"===y&&r.a.createElement("div",{className:"crm-field",style:{maxWidth:320}},r.a.createElement("label",null,"Date de livraison pr\xe9vue"),r.a.createElement("input",{type:"date",value:K,min:f(),max:E(),onChange:e=>X(e.target.value),required:!0})),Q&&r.a.createElement("div",{style:{color:"#e53935",marginTop:8,fontWeight:600}},Q)),r.a.createElement("div",{className:"crm-section-block"},r.a.createElement("div",{className:"crm-section-title"},"Panier"),r.a.createElement("div",{className:"crm-grid-5"},k.map((e,t)=>r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Nom de produit"),r.a.createElement("input",{type:"text",value:e.produit,onChange:e=>re(t,"produit",e.target.value)})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Prix"),r.a.createElement("input",{type:"number",value:e.prix,onChange:e=>re(t,"prix",e.target.value)})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Quantit\xe9"),r.a.createElement("input",{type:"number",value:e.quantite,onChange:e=>re(t,"quantite",e.target.value)})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"Frais de livraison"),r.a.createElement("input",{type:"number",value:e.frais,onChange:e=>re(t,"frais",e.target.value)})),r.a.createElement("div",{className:"crm-field"},r.a.createElement("label",null,"TVA"),r.a.createElement("input",{type:"number",value:e.tva,onChange:e=>re(t,"tva",e.target.value)}))))),r.a.createElement("button",{type:"button",className:"crm-btn-add",onClick:()=>{N([...k,{produit:"",prix:"",quantite:"",frais:"",tva:""}])}},"Ajouter un produit")),D&&r.a.createElement("div",{className:"treatment-timer-block"},r.a.createElement("span",{className:"treatment-timer-label"},"Temps de traitement de la commande :"),r.a.createElement("span",{className:"treatment-timer-value".concat(q>=600?" late":"")},ne(q)),q>=600&&r.a.createElement("span",{className:"treatment-timer-warning"},"\u23f0 D\xe9passement !")),r.a.createElement("div",{className:"crm-section-block",style:{textAlign:"center",marginTop:18}},r.a.createElement("button",{type:"submit",className:"btn-save-order"},"Enregistrer la commande"),w&&r.a.createElement("span",{className:"order-saved-msg"},"Commande enregistr\xe9e !"))))))},x=a(88),h=a(124),y=a(302),v=a(303),S=a.n(v),O=a(570),j=a(571),C=a(572),k=a(156),N=a(157),w=a(89),W=a(327),D=a(575),R=a(328),q=a(155),z=a(112),B=a(573),T=a(158),I=a(574),P=(a(347),a(56)),L=a.n(P);var A=function(){const[e,t]=Object(n.useState)([]),[a,l]=Object(n.useState)(!0),[o,i]=Object(n.useState)(""),[c,d]=Object(n.useState)(""),[s,m]=Object(n.useState)(null);return Object(n.useEffect)(()=>{fetch("/api/shopify/orders").then(e=>e.json()).then(e=>{t(e),l(!1)}).catch(()=>{i("Erreur lors du chargement des commandes"),l(!1)})},[]),r.a.createElement("div",{style:{padding:24}},r.a.createElement("h2",null,"Commandes Shopify re\xe7ues"),a&&r.a.createElement("p",null,"Chargement..."),o&&r.a.createElement("p",{style:{color:"red"}},o),c&&r.a.createElement("p",{style:{color:"green"}},c),r.a.createElement("ul",null,e.map(e=>r.a.createElement("li",{key:e.shopifyOrderId,style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8}},r.a.createElement("strong",null,"ID Shopify:")," ",e.shopifyOrderId,r.a.createElement("br",null),r.a.createElement("strong",null,"Date:")," ",new Date(e.dateReception).toLocaleString(),r.a.createElement("br",null),r.a.createElement("details",null,r.a.createElement("summary",null,"D\xe9tails bruts"),r.a.createElement("pre",{style:{background:"#f8f8f8",padding:8}},JSON.stringify(e.data,null,2))),r.a.createElement("button",{onClick:()=>(async e=>{console.log("=== D\xc9BUT DE L'ENVOI \xc0 GLNET ==="),console.log("Commande ID:",e),m(e),d(""),i("");try{const t="http://localhost:5001/api/shopify/send-to-glnet/".concat(e);console.log("URL de la requ\xeate:",t);const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",credentials:"include"});console.log("Status de la r\xe9ponse:",a.status),console.log("Headers de la r\xe9ponse:",Object.fromEntries(a.headers.entries()));const n=await a.json();if(console.log("Donn\xe9es re\xe7ues:",n),a.ok)d(n.message),console.log("Succ\xe8s:",n);else{const e=n.error||"Erreur lors de l'envoi \xe0 gl-net";i(e),console.error("Erreur:",e)}}catch(t){console.error("Exception lors de l'envoi:",t),i("Erreur lors de l'envoi \xe0 gl-net: "+t.message)}finally{m(null)}})(e.shopifyOrderId),disabled:s===e.shopifyOrderId,style:{marginTop:8,background:"#1976d2",color:"white",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer"}},s===e.shopifyOrderId?"Envoi en cours...":"Envoyer \xe0 gl-net")))))};const F=[{label:"Statistiques"},{label:"Commandes"},{label:"Commandes Shopify"},{label:"Recherch\xe9"},{label:"Vendeurs"},{label:"Demandes d'inscription"}],M=["#1976d2","#e53935","#43a047","#ffb300","#6a1b9a","#00bcd4","#8bc34a","#f44336"];var V=function(){const[e,t]=Object(n.useState)("Statistiques"),[a,l]=Object(n.useState)([]),[o,i]=Object(n.useState)([]),[d,m]=Object(n.useState)(!0),[p,u]=Object(n.useState)(!0),[g,f]=Object(n.useState)(null),[E,b]=Object(n.useState)({nom:"",prenom:"",phone:"",adresse:"",produit:"",quantite:1,prix:0,statut:"En attente",date:(new Date).toISOString().split("T")[0]}),[v,P]=Object(n.useState)(null),[V,Y]=Object(n.useState)({client:"",phone:"",id:"",dateStart:"",dateEnd:"",statut:"",produit:"",operateur:"",canal:""}),[J,H]=Object(n.useState)("Mois"),[U,Q]=Object(n.useState)([L()().startOf("month"),L()()]),[_,K]=Object(n.useState)(""),[X,G]=Object(n.useState)(""),[Z,$]=Object(n.useState)({key:"date",asc:!1}),[ee,te]=Object(n.useState)(1),ae=Object(c.p)(),[ne,re]=Object(n.useState)(null);Object(n.useEffect)(()=>{async function e(){m(!0),re(null);try{const e=await fetch("http://localhost:5001/api/shopify/orders");if(!e.ok)throw new Error("API non disponible");const t=await e.json();l(t)}catch(e){re("Impossible de contacter le serveur des commandes. V\xe9rifiez que le backend est bien lanc\xe9.")}m(!1)}e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]),Object(n.useEffect)(()=>{!async function(){if("Demandes d'inscription"===e){u(!0);try{const e=await fetch("http://localhost:5001/api/requests");if(!e.ok)throw new Error("API non disponible");const t=await e.json();i(t)}catch(t){console.error("Erreur lors du chargement des demandes:",t)}u(!1)}}()},[e]);const le=a.filter(e=>{const t=!V.client||e.nom.toLowerCase().includes(V.client.toLowerCase())||e.prenom.toLowerCase().includes(V.client.toLowerCase()),a=!V.phone||e.phone.includes(V.phone),n=!V.id||e.id.toLowerCase().includes(V.id.toLowerCase()),r=!V.statut||e.statut===V.statut,l=!V.produit||e.produit.toLowerCase().includes(V.produit.toLowerCase()),o=!V.operateur||e.operateur.toLowerCase().includes(V.operateur.toLowerCase()),i=!V.canal||e.canal.toLowerCase().includes(V.canal.toLowerCase()),c=!V.dateStart||e.date>=V.dateStart,d=!V.dateEnd||e.date<=V.dateEnd;return t&&a&&n&&r&&l&&o&&i&&c&&d}),[oe,ie]=function(e,t){const a=L()();let n,r=a.clone();return"Jour"===e?n=a.clone().startOf("day"):"Semaine"===e?n=a.clone().startOf("isoWeek"):"Mois"===e?n=a.clone().startOf("month"):"Trimestre"===e?n=a.clone().startOf("quarter"):"Ann\xe9e"===e?n=a.clone().startOf("year"):"Personnalis\xe9"===e&&t?(n=L()(t[0]),r=L()(t[1])):n=a.clone().startOf("day"),[n,r]}(J,U);let ce=function(e,t,a){return e.filter(e=>L()(e.date).isBetween(t,a,null,"[]"))}(a,oe,ie);_&&(ce=ce.filter(e=>e.produit===_)),X&&(ce=ce.filter(e=>(e.nom+" "+e.prenom+" "+e.produit).toLowerCase().includes(X.toLowerCase())));const de=function(e){const t=e.length,a=e.reduce((e,t)=>e+t.prix*t.quantite,0),n=new Set(e.map(e=>e.nom+e.prenom)),r=e.filter((e,t,a)=>a.findIndex(t=>t.nom===e.nom&&t.prenom===e.prenom)!==t),l=t?a/t:0;return{totalOrders:t,ca:a,clients:n.size,tauxReachat:t?Math.round(r.length/t*100):0,panierMoyen:l}}(ce),se=function(e,t){let a="date";"Jour"===t&&(a="hour"),"Semaine"!==t&&"Mois"!==t||(a="date"),"Trimestre"!==t&&"Ann\xe9e"!==t||(a="month");const n={};return e.forEach(e=>{let t;t="hour"===a?L()(e.date).format("HH"):"month"===a?L()(e.date).format("MMM YYYY"):L()(e.date).format("DD/MM/YYYY"),n[t]||(n[t]={date:t,ca:0,commandes:0}),n[t].ca+=e.prix*e.quantite,n[t].commandes+=1}),Object.values(n).sort((e,t)=>L()(e.date,"DD/MM/YYYY").toDate()-L()(t.date,"DD/MM/YYYY").toDate())}(ce,J),me=function(e,t){const a={};return e.forEach(e=>{const n=e[t]||"Autre";a[n]||(a[n]=0),a[n]+=e.prix*e.quantite}),Object.entries(a).map(e=>{let[t,a]=e;return{name:t,value:a}})}(ce,"produit"),pe=function(e,t){const a={};return e.forEach(e=>{const n=e[t]||"Autre";a[n]||(a[n]=0),a[n]+=e.prix*e.quantite}),Object.entries(a).map(e=>{let[t,a]=e;return{name:t,value:a}})}(ce,"statut"),ue=[...new Set(a.map(e=>e.produit))],ge=ce.slice(10*(ee-1),10*ee);return r.a.createElement("div",{style:{maxWidth:1200,margin:"0 auto",padding:0,background:"#fff",minHeight:"100vh"}},r.a.createElement("div",{style:{padding:16,background:"#f5f5f5",borderBottom:"1px solid #ddd"}}),r.a.createElement("div",{style:{display:"flex",borderBottom:"2px solid #eee",background:"#fff",position:"sticky",top:0,zIndex:10}},r.a.createElement("div",{style:{fontWeight:900,fontSize:"1.3rem",letterSpacing:1.5,marginLeft:32,alignSelf:"center",textTransform:"uppercase",display:"flex",alignItems:"center"}},"C- ",r.a.createElement("span",{style:{color:"#e53935",marginLeft:4,marginRight:4}},"INNOVATECH")," ",r.a.createElement("span",{style:{color:"#222"}},"SOLUTIONS")),F.map(a=>r.a.createElement("div",{key:a.label,onClick:()=>t(a.label),style:{padding:"0 32px",height:48,display:"flex",alignItems:"center",cursor:"pointer",fontWeight:600,color:e===a.label?"#e53935":"#222",borderBottom:e===a.label?"3px solid #e53935":"3px solid transparent",fontSize:"1.08rem",background:e===a.label?"#fff":"none",transition:"border 0.2s, color 0.2s"}},a.label)),r.a.createElement("div",{style:{flex:1}}),r.a.createElement("button",{style:{marginRight:32,background:"#e53935",color:"#fff",border:"none",borderRadius:20,padding:"10px 32px",fontSize:"1.08rem",fontWeight:700,cursor:"pointer",alignSelf:"center"},onClick:()=>ae("/")},"D\xe9connexion")),r.a.createElement("div",{style:{padding:"48px 0 0 0",minHeight:600}},"Statistiques"===e&&r.a.createElement("div",{style:{maxWidth:1200,margin:"0 auto",textAlign:"center",padding:"0 8px"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",marginBottom:24,gap:12}},r.a.createElement("h2",{style:{fontWeight:900,fontSize:"2rem",margin:0,letterSpacing:1,display:"flex",alignItems:"center",gap:8}},r.a.createElement("span",{role:"img","aria-label":"stats"},"\ud83d\udcca")," Statistiques de vente"),r.a.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"}},["Jour","Semaine","Mois","Trimestre","Ann\xe9e","Personnalis\xe9"].map(e=>r.a.createElement("button",{key:e,onClick:()=>H(e),style:{background:J===e?"#e53935":"#e3f2fd",color:J===e?"#fff":"#1976d2",border:"none",borderRadius:18,padding:"8px 18px",fontWeight:700,fontSize:"1rem",cursor:"pointer"}},e)),"Personnalis\xe9"===J&&r.a.createElement(I.a.RangePicker,{value:U,onChange:e=>Q(e),format:"DD/MM/YYYY",style:{marginLeft:8}}),r.a.createElement("select",{value:_,onChange:e=>K(e.target.value),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem",background:"#fff"}},r.a.createElement("option",{value:""},"Tous les produits"),ue.map(e=>r.a.createElement("option",{key:e,value:e},e))),r.a.createElement("button",{onClick:()=>{},style:{background:"#43a047",color:"#fff",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:700,fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:8}},r.a.createElement(x.c,null)," Exporter"))),r.a.createElement("div",{style:{display:"flex",gap:24,flexWrap:"wrap",justifyContent:"center",marginBottom:32}},r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:"18px 32px",minWidth:180,border:"1.5px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},r.a.createElement("div",{style:{fontSize:15,color:"#888"}},"Total commandes"),r.a.createElement("div",{style:{fontWeight:800,fontSize:28}},de.totalOrders)),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:"18px 32px",minWidth:180,border:"1.5px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},r.a.createElement("div",{style:{fontSize:15,color:"#888"}},"Chiffre d'affaires (\u20ac)"),r.a.createElement("div",{style:{fontWeight:800,fontSize:28}},de.ca.toLocaleString("fr-FR"))),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:"18px 32px",minWidth:180,border:"1.5px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},r.a.createElement("div",{style:{fontSize:15,color:"#888"}},"Clients uniques"),r.a.createElement("div",{style:{fontWeight:800,fontSize:28}},de.clients)),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:"18px 32px",minWidth:180,border:"1.5px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},r.a.createElement("div",{style:{fontSize:15,color:"#888"}},"Taux de r\xe9achat"),r.a.createElement("div",{style:{fontWeight:800,fontSize:28}},de.tauxReachat,"%")),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:"18px 32px",minWidth:180,border:"1.5px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},r.a.createElement("div",{style:{fontSize:15,color:"#888"}},"Panier moyen (\u20ac)"),r.a.createElement("div",{style:{fontWeight:800,fontSize:28}},de.panierMoyen.toLocaleString("fr-FR",{maximumFractionDigits:2})))),r.a.createElement("div",{style:{display:"flex",gap:24,flexWrap:"wrap",justifyContent:"center",marginBottom:32}},r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:18,border:"1.5px solid #eee",flex:1,minWidth:320,maxWidth:500}},r.a.createElement("div",{style:{fontWeight:600,marginBottom:8}},"Courbe des ventes"),r.a.createElement(O.a,{width:"100%",height:220},r.a.createElement(j.a,{data:se,margin:{top:10,right:20,left:0,bottom:0}},r.a.createElement(C.a,{strokeDasharray:"3 3"}),r.a.createElement(k.a,{dataKey:"date"}),r.a.createElement(N.a,null),r.a.createElement(w.a,null),r.a.createElement(W.a,{type:"monotone",dataKey:"ca",stroke:"#e53935",strokeWidth:3})))),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:18,border:"1.5px solid #eee",flex:1,minWidth:320,maxWidth:500}},r.a.createElement("div",{style:{fontWeight:600,marginBottom:8}},"R\xe9partition des ventes (produits)"),r.a.createElement(O.a,{width:"100%",height:220},r.a.createElement(D.a,null,r.a.createElement(R.a,{data:me,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0},me.map((e,t)=>r.a.createElement(q.a,{key:e.name,fill:M[t%M.length]}))),r.a.createElement(w.a,null),r.a.createElement(z.a,null)))),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,padding:18,border:"1.5px solid #eee",flex:1,minWidth:320,maxWidth:500}},r.a.createElement("div",{style:{fontWeight:600,marginBottom:8}},"Statut des commandes"),r.a.createElement(O.a,{width:"100%",height:220},r.a.createElement(B.a,{data:pe,margin:{top:10,right:20,left:0,bottom:0}},r.a.createElement(C.a,{strokeDasharray:"3 3"}),r.a.createElement(k.a,{dataKey:"name"}),r.a.createElement(N.a,null),r.a.createElement(w.a,null),r.a.createElement(T.a,{dataKey:"value",fill:"#1976d2"}))))),r.a.createElement("div",{style:{background:"#fff",borderRadius:12,border:"1.5px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",padding:18,marginBottom:32}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12}},r.a.createElement("input",{type:"text",placeholder:"Recherche...",value:X,onChange:e=>{G(e.target.value),te(1)},style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem",minWidth:200}}),r.a.createElement("div",{style:{fontSize:13,color:"#888"}},"Total : ",ce.length," commandes")),r.a.createElement("div",{style:{overflowX:"auto"}},d?r.a.createElement("div",null,"Chargement des commandes..."):ne?r.a.createElement("div",null,ne):r.a.createElement("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,fontSize:"0.99rem",background:"#fff",borderRadius:10}},r.a.createElement("thead",null,r.a.createElement("tr",{style:{background:"#f7f8fa"}},r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222",cursor:"pointer"},onClick:()=>{$(e=>({key:"date",asc:"date"!==e.key||!e.asc}))}},"Date ","date"===Z.key&&(Z.asc?r.a.createElement(x.b,null):r.a.createElement(x.a,null))),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222",cursor:"pointer"},onClick:()=>{$(e=>({key:"nom",asc:"nom"!==e.key||!e.asc}))}},"Client ","nom"===Z.key&&(Z.asc?r.a.createElement(x.b,null):r.a.createElement(x.a,null))),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Produit"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Quantit\xe9"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Prix"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Total"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Statut"))),r.a.createElement("tbody",null,ge.map((e,t)=>r.a.createElement("tr",{key:e.id||t,style:{borderBottom:"1.5px solid #f0f0f0"}},r.a.createElement("td",{style:{padding:"10px 8px"}},L()(e.date).format("DD/MM/YYYY")),r.a.createElement("td",{style:{padding:"10px 8px"}},e.nom," ",e.prenom),r.a.createElement("td",{style:{padding:"10px 8px"}},e.produit),r.a.createElement("td",{style:{padding:"10px 8px",textAlign:"center"}},e.quantite),r.a.createElement("td",{style:{padding:"10px 8px",textAlign:"right"}},e.prix," \u20ac"),r.a.createElement("td",{style:{padding:"10px 8px",textAlign:"right"}},(e.prix*e.quantite).toLocaleString("fr-FR")," \u20ac"),r.a.createElement("td",{style:{padding:"10px 8px"}},e.statut)))))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",gap:8,marginTop:12}},Array.from({length:Math.ceil(ce.length/10)},(e,t)=>r.a.createElement("button",{key:t,onClick:()=>te(t+1),style:{background:ee===t+1?"#e53935":"#e3f2fd",color:ee===t+1?"#fff":"#1976d2",border:"none",borderRadius:8,padding:"6px 14px",fontWeight:700,fontSize:"1rem",cursor:"pointer"}},t+1))))),"Commandes"===e&&r.a.createElement("div",{style:{maxWidth:950,margin:"0 auto",textAlign:"left",background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.07)",padding:"32px 28px 24px 28px",border:"1.5px solid #e0e0e0"}},r.a.createElement("h2",{style:{fontWeight:800,fontSize:"1.6rem",marginBottom:32,textAlign:"center",letterSpacing:1}},"Commandes"),r.a.createElement("section",{style:{marginBottom:36,borderBottom:"1.5px solid #f0f0f0",paddingBottom:24}},r.a.createElement("h3",{style:{fontWeight:700,fontSize:"1.13rem",marginBottom:18,color:"#1976d2"}},"Cr\xe9er ou modifier une commande"),r.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),null!==v){const e=Object(s.a)(Object(s.a)({},a[v]),E);await fetch("/api/orders/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});const t=[...a];t[v]=e,l(t),P(null)}else{const e="CMD"+(a.length+1).toString().padStart(3,"0"),t=Object(s.a)(Object(s.a)({},E),{},{id:e,logistique:!1,historique:[{date:(new Date).toISOString().split("T")[0],action:"Cr\xe9ation",utilisateur:"Admin"}]}),n=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();l([...a,r])}b({nom:"",prenom:"",phone:"",adresse:"",produit:"",quantite:1,prix:0,statut:"En attente",date:(new Date).toISOString().split("T")[0]})},style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"18px 18px",alignItems:"end",marginBottom:0}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Nom"),r.a.createElement("input",{type:"text",value:E.nom,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{nom:e.target.value})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Pr\xe9nom"),r.a.createElement("input",{type:"text",value:E.prenom,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{prenom:e.target.value})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"T\xe9l\xe9phone"),r.a.createElement("input",{type:"text",value:E.phone,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{phone:e.target.value})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Adresse de livraison"),r.a.createElement("input",{type:"text",value:E.adresse,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{adresse:e.target.value})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Nom du produit"),r.a.createElement("input",{type:"text",value:E.produit,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{produit:e.target.value})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Quantit\xe9"),r.a.createElement("input",{type:"number",min:1,value:E.quantite,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{quantite:parseInt(e.target.value)||1})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px",width:100}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Prix"),r.a.createElement("input",{type:"number",min:0,value:E.prix,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{prix:parseFloat(e.target.value)||0})),required:!0,style:{borderRadius:6,border:"1.2px solid #cfd8dc",padding:"8px 10px",width:120}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",{style:{fontWeight:500,color:"#444",marginBottom:2}},"Statut"),r.a.createElement("select",{value:E.statut,onChange:e=>b(t=>Object(s.a)(Object(s.a)({},t),{},{statut:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"0.97rem",background:"#fff"}},r.a.createElement("option",{value:"En attente"},"En attente"),r.a.createElement("option",{value:"En cours"},"En cours"),r.a.createElement("option",{value:"Exp\xe9di\xe9e"},"Exp\xe9di\xe9e"),r.a.createElement("option",{value:"Livr\xe9e"},"Livr\xe9e"),r.a.createElement("option",{value:"Annul\xe9e"},"Annul\xe9e"))),r.a.createElement("div",{style:{display:"flex",gap:10,gridColumn:"1/5"}},r.a.createElement("button",{type:"submit",style:{background:"#43a047",color:"#fff",border:"none",borderRadius:8,padding:"10px 28px",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 2px 8px rgba(67,160,71,0.10)"}},null!==v?"Valider la modification":"Cr\xe9er la commande"),null!==v&&r.a.createElement("button",{type:"button",onClick:()=>{P(null),b({nom:"",prenom:"",phone:"",adresse:"",produit:"",quantite:1,prix:0,statut:"En attente",date:(new Date).toISOString().split("T")[0]})},style:{background:"#e53935",color:"#fff",border:"none",borderRadius:8,padding:"10px 28px",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 2px 8px rgba(229,57,53,0.10)"}},"Annuler")))),r.a.createElement("section",{style:{marginBottom:36}},r.a.createElement("h3",{style:{fontWeight:700,fontSize:"1.13rem",marginBottom:18,color:"#1976d2"}},"Liste des commandes"),r.a.createElement("div",{style:{marginBottom:20,display:"flex",gap:12,flexWrap:"wrap"}},r.a.createElement("input",{type:"text",placeholder:"Rechercher par nom...",value:V.client,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{client:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"0.97rem",minWidth:200}}),r.a.createElement("select",{value:V.statut,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{statut:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"0.97rem",background:"#fff"}},r.a.createElement("option",{value:""},"Tous les statuts"),r.a.createElement("option",{value:"En attente"},"En attente"),r.a.createElement("option",{value:"En cours"},"En cours"),r.a.createElement("option",{value:"Exp\xe9di\xe9e"},"Exp\xe9di\xe9e"),r.a.createElement("option",{value:"Livr\xe9e"},"Livr\xe9e"),r.a.createElement("option",{value:"Annul\xe9e"},"Annul\xe9e")),r.a.createElement("input",{type:"date",value:V.dateStart,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{dateStart:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"0.97rem"}}),r.a.createElement("input",{type:"date",value:V.dateEnd,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{dateEnd:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"0.97rem"}})),r.a.createElement("div",{style:{display:"flex",gap:12,marginBottom:16}},r.a.createElement("button",{onClick:()=>{const e=h.a.json_to_sheet(a.map(e=>({ID:e.id,Nom:e.nom,"Pr\xe9nom":e.prenom,"T\xe9l\xe9phone":e.phone,Adresse:e.adresse,Produit:e.produit,"Quantit\xe9":e.quantite,Prix:e.prix,Logistique:e.logistique?"Oui":"Non"}))),t=h.a.book_new();h.a.book_append_sheet(t,e,"Commandes"),h.b(t,"commandes.xlsx")},style:{background:"#43a047",color:"#fff",border:"none",borderRadius:8,padding:"10px 24px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",display:"flex",alignItems:"center",gap:8}},r.a.createElement(x.c,null)," Exporter en Excel"),r.a.createElement("button",{onClick:()=>{const e=new y.a("l","mm","a4");e.setFontSize(16),e.text("Liste des Commandes",14,15);const t=a.map(e=>[e.id,"".concat(e.nom," ").concat(e.prenom),e.phone,e.adresse,e.produit,e.quantite.toString(),"".concat(e.prix," \u20ac"),e.logistique?"Oui":"Non"]);S()(e,{head:[["ID","Client","T\xe9l\xe9phone","Adresse","Produit","Quantit\xe9","Prix","Logistique"]],body:t,startY:25,theme:"grid",styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[22,160,133],textColor:[255,255,255],fontStyle:"bold"},columnStyles:{0:{cellWidth:30},1:{cellWidth:40},2:{cellWidth:35},3:{cellWidth:60},4:{cellWidth:40},5:{cellWidth:25},6:{cellWidth:25},7:{cellWidth:25}},margin:{top:25}}),e.save("commandes.pdf")},style:{background:"#e53935",color:"#fff",border:"none",borderRadius:8,padding:"10px 24px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",display:"flex",alignItems:"center",gap:8}},r.a.createElement(x.c,null)," Exporter en PDF")),r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,fontSize:"0.99rem",background:"#fff",borderRadius:10,boxShadow:"0 1px 6px rgba(0,0,0,0.04)"}},r.a.createElement("thead",null,r.a.createElement("tr",{style:{background:"#f7f8fa"}},r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Client"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"T\xe9l\xe9phone"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Adresse"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Produit"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Quantit\xe9"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Prix"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Statut"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Date"),r.a.createElement("th",{style:{padding:"12px 8px",fontWeight:700,color:"#222",borderBottom:"2px solid #e0e0e0"}},"Actions"))),r.a.createElement("tbody",null,le.map((e,t)=>{var n,o,i,c,d,m,p;return r.a.createElement("tr",{key:e.id||t,style:{background:e.logistique?"#e3f2fd":"white",transition:"background 0.2s",borderBottom:"1.5px solid #f0f0f0",cursor:"pointer"},onMouseOver:e=>e.currentTarget.style.background="#f5f5f5",onMouseOut:t=>t.currentTarget.style.background=e.logistique?"#e3f2fd":"white"},r.a.createElement("td",{style:{padding:"10px 8px",fontWeight:600,color:"#222"}},null===(n=e.client)||void 0===n?void 0:n.nom," ",null===(o=e.client)||void 0===o?void 0:o.prenom),r.a.createElement("td",{style:{padding:"10px 8px"}},null===(i=e.client)||void 0===i?void 0:i.telephone),r.a.createElement("td",{style:{padding:"10px 8px"}},null===(c=e.client)||void 0===c?void 0:c.adresse),r.a.createElement("td",{style:{padding:"10px 8px"}},null===(d=e.produits)||void 0===d?void 0:d.map(e=>e.nom).join(", ")),r.a.createElement("td",{style:{padding:"10px 8px",textAlign:"center"}},null===(m=e.produits)||void 0===m?void 0:m.reduce((e,t)=>e+(t.quantite||1),0)),r.a.createElement("td",{style:{padding:"10px 8px",textAlign:"right"}},null===(p=e.produits)||void 0===p?void 0:p.reduce((e,t)=>e+(t.prix||0),0)," \u20ac"),r.a.createElement("td",{style:{padding:"10px 8px"}},r.a.createElement("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:"0.9rem",fontWeight:600,background:"En attente"===e.statut?"#fff3e0":"En cours"===e.statut?"#e3f2fd":"Exp\xe9di\xe9e"===e.statut?"#e8f5e9":"Livr\xe9e"===e.statut?"#f3e5f5":"#ffebee",color:"En attente"===e.statut?"#e65100":"En cours"===e.statut?"#1565c0":"Exp\xe9di\xe9e"===e.statut?"#2e7d32":"Livr\xe9e"===e.statut?"#6a1b9a":"#c62828"}},e.statut)),r.a.createElement("td",{style:{padding:"10px 8px"}},new Date(e.date).toLocaleDateString("fr-FR")),r.a.createElement("td",{style:{padding:"10px 8px"}},e.agent||"\u2014"),r.a.createElement("td",{style:{padding:"10px 8px"}},r.a.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},r.a.createElement("button",{style:{background:"#1976d2",color:"#fff",border:"none",borderRadius:7,padding:"7px 16px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",minWidth:90},onClick:t=>{t.stopPropagation(),(e=>{f(e),window.scrollTo({top:0,behavior:"smooth"})})(e)}},"D\xe9tails"),r.a.createElement("button",{style:{background:"#43a047",color:"#fff",border:"none",borderRadius:7,padding:"7px 16px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",minWidth:90,opacity:e.logistique?.7:1},onClick:e=>{e.stopPropagation(),(async e=>{const t=Object(s.a)(Object(s.a)({},a[e]),{},{logistique:!0});try{await fetch("/api/orders/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!(await fetch("/api/shopify/send-to-glnet/".concat(t.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Erreur lors de l'envoi \xe0 gl-net");const n=[...a];n[e]=Object(s.a)(Object(s.a)({},t),{},{glnetSent:!0}),l(n),alert("Commande envoy\xe9e \xe0 gl-net avec succ\xe8s !")}catch(n){console.error("Erreur:",n),alert("Erreur lors de l'envoi \xe0 gl-net: "+n.message)}})(t)},disabled:e.logistique},e.logistique?"Envoy\xe9e":"Logistique"),r.a.createElement("button",{style:{background:"#ffb300",color:"#fff",border:"none",borderRadius:7,padding:"7px 16px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",minWidth:90},onClick:e=>{e.stopPropagation(),(e=>{b(Object(s.a)({},a[e])),P(e),window.scrollTo({top:0,behavior:"smooth"})})(t)}},"Modifier"),r.a.createElement("button",{style:{background:"#e53935",color:"#fff",border:"none",borderRadius:7,padding:"7px 16px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",minWidth:90},onClick:e=>{e.stopPropagation(),(async e=>{const t=a[e].id;await fetch("/api/orders/".concat(t),{method:"DELETE"}),l(a.filter((t,a)=>a!==e)),f(null)})(t)}},"Supprimer"))))}))))),g&&r.a.createElement("section",{style:{marginBottom:32}},r.a.createElement("h3",{style:{fontWeight:700,fontSize:"1.13rem",marginBottom:18,color:"#1976d2"}},"D\xe9tail de la commande ",g.id),r.a.createElement("div",{style:{background:"#fafbfc",borderRadius:12,padding:24,border:"1.5px solid #e0e0e0",maxWidth:700,margin:"0 auto"}},r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Client :")," ",g.nom," ",g.prenom),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"T\xe9l\xe9phone :")," ",g.phone),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Adresse :")," ",g.adresse),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Produit :")," ",g.produit),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Quantit\xe9 :")," ",g.quantite),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Prix :")," ",g.prix," \u20ac"),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Envoy\xe9e \xe0 la logistique :")," ",g.logistique?"Oui":"Non"),r.a.createElement("button",{style:{marginTop:12,background:"#888",color:"#fff",border:"none",borderRadius:8,padding:"10px 28px",fontWeight:700,fontSize:"1rem",cursor:"pointer",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:()=>f(null)},"Fermer")))),"Commandes Shopify"===e&&r.a.createElement(A,null),"Recherch\xe9"===e&&r.a.createElement("div",{style:{maxWidth:1100,margin:"0 auto",textAlign:"left",background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.07)",padding:"32px 28px 24px 28px",border:"1.5px solid #e0e0e0"}},r.a.createElement("h2",{style:{fontWeight:900,fontSize:"2rem",marginBottom:24,letterSpacing:1,display:"flex",alignItems:"center",gap:8}},r.a.createElement("span",{role:"img","aria-label":"search"},"\ud83d\udd0e")," Recherche avanc\xe9e de commandes"),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:18,marginBottom:24,alignItems:"end"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Nom ou Pr\xe9nom"),r.a.createElement("input",{type:"text",placeholder:"Nom ou pr\xe9nom...",value:V.client,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{client:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"T\xe9l\xe9phone"),r.a.createElement("input",{type:"text",placeholder:"T\xe9l\xe9phone...",value:V.phone,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{phone:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"N\xb0 Commande"),r.a.createElement("input",{type:"text",placeholder:"CMD...",value:V.id,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{id:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Date d\xe9but"),r.a.createElement("input",{type:"date",value:V.dateStart,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{dateStart:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Date fin"),r.a.createElement("input",{type:"date",value:V.dateEnd,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{dateEnd:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Statut"),r.a.createElement("select",{value:V.statut,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{statut:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}},r.a.createElement("option",{value:""},"Tous"),r.a.createElement("option",{value:"En attente"},"\ud83d\udd52 En attente"),r.a.createElement("option",{value:"En cours"},"En cours"),r.a.createElement("option",{value:"Exp\xe9di\xe9e"},"Exp\xe9di\xe9e"),r.a.createElement("option",{value:"Livr\xe9e"},"\u2705 Livr\xe9e"),r.a.createElement("option",{value:"Annul\xe9e"},"\u274c Annul\xe9e"),r.a.createElement("option",{value:"Litige"},"\ud83d\udea8 Litige"))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Canal"),r.a.createElement("input",{type:"text",placeholder:"Web, Appel...",value:V.canal,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{canal:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Op\xe9rateur"),r.a.createElement("input",{type:"text",placeholder:"Agent...",value:V.operateur,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{operateur:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:4}},r.a.createElement("label",null,"Produit"),r.a.createElement("input",{type:"text",placeholder:"Produit...",value:V.produit,onChange:e=>Y(t=>Object(s.a)(Object(s.a)({},t),{},{produit:e.target.value})),style:{padding:"8px 12px",borderRadius:6,border:"1.2px solid #cfd8dc",fontSize:"1rem"}}))),r.a.createElement("div",{style:{overflowX:"auto",marginTop:18}},r.a.createElement("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,fontSize:"0.99rem",background:"#fff",borderRadius:10}},r.a.createElement("thead",null,r.a.createElement("tr",{style:{background:"#f7f8fa"}},r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"N\xb0 Cmd"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Client"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"T\xe9l\xe9phone"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Date"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Produit(s)"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Montant"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Statut"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Agent"),r.a.createElement("th",{style:{padding:"10px 8px",fontWeight:700,color:"#222"}},"Actions"))),r.a.createElement("tbody",null,le.map((e,t)=>r.a.createElement("tr",{key:e.id||t,style:{borderBottom:"1.5px solid #f0f0f0"}},r.a.createElement("td",{style:{padding:"10px 8px",fontWeight:600}},e.id),r.a.createElement("td",{style:{padding:"10px 8px"}},e.nom," ",e.prenom),r.a.createElement("td",{style:{padding:"10px 8px"}},e.phone),r.a.createElement("td",{style:{padding:"10px 8px"}},e.date),r.a.createElement("td",{style:{padding:"10px 8px"}},e.produit," ",e.quantite>1?"(x".concat(e.quantite,")"):""),r.a.createElement("td",{style:{padding:"10px 8px",textAlign:"right"}},e.prix*e.quantite," \u20ac"),r.a.createElement("td",{style:{padding:"10px 8px"}},r.a.createElement("span",{style:{padding:"4px 8px",borderRadius:12,fontWeight:600,background:"Livr\xe9e"===e.statut?"#e8f5e9":"Annul\xe9e"===e.statut?"#ffebee":"En attente"===e.statut?"#fff3e0":"Litige"===e.statut?"#ffecb3":"#e3f2fd",color:"Livr\xe9e"===e.statut?"#2e7d32":"Annul\xe9e"===e.statut?"#c62828":"En attente"===e.statut?"#e65100":"Litige"===e.statut?"#ff9800":"#1565c0"}},e.statut)),r.a.createElement("td",{style:{padding:"10px 8px"}},e.operateur||"\u2014"),r.a.createElement("td",{style:{padding:"10px 8px"}},r.a.createElement("button",{style:{background:"#1976d2",color:"#fff",border:"none",borderRadius:7,padding:"6px 12px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",marginRight:4},onClick:()=>f(e)},"\ud83d\udd0d"),r.a.createElement("button",{style:{background:"#ffb300",color:"#fff",border:"none",borderRadius:7,padding:"6px 12px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer",marginRight:4}},"\u270f\ufe0f"),r.a.createElement("button",{style:{background:"#888",color:"#fff",border:"none",borderRadius:7,padding:"6px 12px",fontWeight:600,fontSize:"0.97rem",cursor:"pointer"}},"\ud83d\udcc4"))))))),g&&r.a.createElement("div",{style:{marginTop:32,background:"#fafbfc",borderRadius:12,padding:24,border:"1.5px solid #e0e0e0",maxWidth:700,margin:"32px auto 0 auto"}},r.a.createElement("h3",{style:{fontWeight:700,fontSize:"1.13rem",marginBottom:18,color:"#1976d2"}},"Fiche commande ",g.id),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Client :")," ",g.nom," ",g.prenom),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"T\xe9l\xe9phone :")," ",g.phone),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Adresse :")," ",g.adresse),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Produit :")," ",g.produit),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Quantit\xe9 :")," ",g.quantite),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Prix :")," ",g.prix," \u20ac"),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Statut :")," ",g.statut),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Op\xe9rateur :")," ",g.operateur||"\u2014"),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Date :")," ",g.date),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Canal :")," ",g.canal||"\u2014"),r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement("b",null,"Historique :")," ",r.a.createElement("pre",{style:{background:"#f5f5f5",borderRadius:6,padding:8,fontSize:13}},JSON.stringify(g.historique,null,2))),r.a.createElement("button",{style:{marginTop:12,background:"#888",color:"#fff",border:"none",borderRadius:8,padding:"10px 28px",fontWeight:700,fontSize:"1rem",cursor:"pointer",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:()=>f(null)},"Fermer"))),"Vendeurs"===e&&r.a.createElement("div",{style:{maxWidth:700,margin:"0 auto",textAlign:"center"}},r.a.createElement("h2",{style:{fontWeight:700,fontSize:"1.5rem",marginBottom:32}},"Vendeurs"),r.a.createElement("div",null,"[Liste des vendeurs ici]")),"Demandes d'inscription"===e&&r.a.createElement("div",{className:"registration-requests"},r.a.createElement("h2",null,"Demandes d'inscription en attente"),p?r.a.createElement("p",null,"Chargement des demandes..."):0===o.length?r.a.createElement("p",null,"Aucune demande en attente"):r.a.createElement("div",{className:"requests-list"},o.map(e=>r.a.createElement("div",{key:e._id,className:"request-card"},r.a.createElement("h3",null,e.prenom," ",e.nom),r.a.createElement("p",null,"Email: ",e.email),r.a.createElement("p",null,"T\xe9l\xe9phone: ",e.telephone),r.a.createElement("p",null,"R\xf4le demand\xe9: ",e.role),r.a.createElement("p",null,"Exp\xe9rience: ",e.experience),r.a.createElement("p",null,"Date de demande: ",new Date(e.dateDemande).toLocaleDateString()),r.a.createElement("div",{className:"request-actions"},r.a.createElement("button",{onClick:()=>(async e=>{const t=prompt("Entrez le nom d'utilisateur pour ce compte:");if(!t)return;const a=prompt("Entrez le mot de passe pour ce compte:");if(a)try{if(!(await fetch("http://localhost:5001/api/approve/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})})).ok)throw new Error("Erreur lors de l'approbation");const n=await fetch("http://localhost:5001/api/requests").then(e=>e.json());i(n),alert("Demande approuv\xe9e avec succ\xe8s")}catch(n){alert("Erreur lors de l'approbation: "+n.message)}})(e._id),className:"approve-btn"},"Approuver"),r.a.createElement("button",{onClick:()=>(async e=>{const t=prompt("Entrez la raison du refus:");if(t)try{if(!(await fetch("http://localhost:5001/api/reject/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})})).ok)throw new Error("Erreur lors du refus");const a=await fetch("http://localhost:5001/api/requests").then(e=>e.json());i(a),alert("Demande refus\xe9e avec succ\xe8s")}catch(a){alert("Erreur lors du refus: "+a.message)}})(e._id),className:"reject-btn"},"Refuser"))))))))};a(562);var Y=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",element:r.a.createElement(d,null)}),r.a.createElement(c.a,{path:"/register",element:r.a.createElement(m,null)}),r.a.createElement(c.a,{path:"/operateur",element:r.a.createElement(b,null)}),r.a.createElement(c.a,{path:"/admin",element:r.a.createElement(V,null)}),r.a.createElement(c.a,{path:"/admin/shopify-orders",element:r.a.createElement(A,null)}))))};var J=e=>{e&&e instanceof Function&&a.e(6).then(a.bind(null,695)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:l,getTTFB:o}=t;a(e),n(e),r(e),l(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null))),J()}},[[336,1,2]]]);
//# sourceMappingURL=main.8f9923e8.chunk.js.map