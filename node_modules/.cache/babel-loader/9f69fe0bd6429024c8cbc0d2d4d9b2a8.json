{"ast":null,"code":"var _jsxFileName = \"/Users/lbc/Desktop/CRM-J-main/src/AdminShopifyOrders.js\";\nimport React, { useEffect, useState } from 'react';\nfunction AdminShopifyOrders() {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [successMsg, setSuccessMsg] = useState('');\n  const [sendingId, setSendingId] = useState(null);\n  useEffect(() => {\n    fetch('/api/shopify/orders').then(res => res.json()).then(data => {\n      setOrders(data);\n      setLoading(false);\n    }).catch(() => {\n      setError('Erreur lors du chargement des commandes');\n      setLoading(false);\n    });\n  }, []);\n  const handleSendToNextera = async orderId => {\n    console.log('=== DÉBUT DE L\\'ENVOI À NEXTERA ===');\n    console.log('Commande ID:', orderId);\n    setSendingId(orderId);\n    setSuccessMsg('');\n    setError('');\n    try {\n      const url = `http://localhost:5001/api/nextera/send-to-nextera/${orderId}`;\n      console.log('URL de la requête:', url);\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        credentials: 'include'\n      });\n      console.log('Status de la réponse:', response.status);\n      console.log('Headers de la réponse:', Object.fromEntries(response.headers.entries()));\n      const data = await response.json();\n      console.log('Données reçues:', data);\n      if (response.ok) {\n        setSuccessMsg(`Commande ${orderId} envoyée à Nextera !`);\n        console.log('Succès:', data);\n      } else {\n        const errorMsg = data.error || 'Erreur lors de l\\'envoi à Nextera';\n        setError(errorMsg);\n        console.error('Erreur:', errorMsg);\n      }\n    } catch (e) {\n      console.error('Exception lors de l\\'envoi:', e);\n      setError('Erreur lors de l\\'envoi à Nextera: ' + e.message);\n    } finally {\n      setSendingId(null);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Commandes Shopify re\\xE7ues\"), loading && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 19\n    }\n  }, \"Chargement...\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, error), successMsg && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 22\n    }\n  }, successMsg), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, orders.map(order => /*#__PURE__*/React.createElement(\"li\", {\n    key: order.shopifyOrderId,\n    style: {\n      marginBottom: 16,\n      borderBottom: '1px solid #eee',\n      paddingBottom: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"ID Shopify:\"), \" \", order.shopifyOrderId, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 64\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"Date:\"), \" \", new Date(order.dateReception).toLocaleString(), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 84\n    }\n  }), /*#__PURE__*/React.createElement(\"details\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"summary\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }, \"D\\xE9tails bruts\"), /*#__PURE__*/React.createElement(\"pre\", {\n    style: {\n      background: '#f8f8f8',\n      padding: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, JSON.stringify(order.data, null, 2))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleSendToNextera(order.shopifyOrderId),\n    disabled: sendingId === order.shopifyOrderId,\n    style: {\n      marginTop: 8,\n      background: '#1976d2',\n      color: 'white',\n      border: 'none',\n      borderRadius: 4,\n      padding: '8px 16px',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, sendingId === order.shopifyOrderId ? 'Envoi en cours...' : 'Envoyer à Nextera')))));\n}\nexport default AdminShopifyOrders;","map":{"version":3,"names":["React","useEffect","useState","AdminShopifyOrders","orders","setOrders","loading","setLoading","error","setError","successMsg","setSuccessMsg","sendingId","setSendingId","fetch","then","res","json","data","catch","handleSendToNextera","orderId","console","log","url","response","method","headers","mode","credentials","status","Object","fromEntries","entries","ok","errorMsg","e","message","createElement","style","padding","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","color","map","order","key","shopifyOrderId","marginBottom","borderBottom","paddingBottom","Date","dateReception","toLocaleString","background","JSON","stringify","onClick","disabled","marginTop","border","borderRadius","cursor"],"sources":["/Users/lbc/Desktop/CRM-J-main/src/AdminShopifyOrders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nfunction AdminShopifyOrders() {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [successMsg, setSuccessMsg] = useState('');\n  const [sendingId, setSendingId] = useState(null);\n\n  useEffect(() => {\n    fetch('/api/shopify/orders')\n      .then(res => res.json())\n      .then(data => {\n        setOrders(data);\n        setLoading(false);\n      })\n      .catch(() => {\n        setError('Erreur lors du chargement des commandes');\n        setLoading(false);\n      });\n  }, []);\n\n  const handleSendToNextera = async (orderId) => {\n    console.log('=== DÉBUT DE L\\'ENVOI À NEXTERA ===');\n    console.log('Commande ID:', orderId);\n    setSendingId(orderId);\n    setSuccessMsg('');\n    setError('');\n    \n    try {\n      const url = `http://localhost:5001/api/nextera/send-to-nextera/${orderId}`;\n      console.log('URL de la requête:', url);\n      \n      const response = await fetch(url, { \n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        credentials: 'include'\n      });\n      \n      console.log('Status de la réponse:', response.status);\n      console.log('Headers de la réponse:', Object.fromEntries(response.headers.entries()));\n      \n      const data = await response.json();\n      console.log('Données reçues:', data);\n      \n      if (response.ok) {\n        setSuccessMsg(`Commande ${orderId} envoyée à Nextera !`);\n        console.log('Succès:', data);\n      } else {\n        const errorMsg = data.error || 'Erreur lors de l\\'envoi à Nextera';\n        setError(errorMsg);\n        console.error('Erreur:', errorMsg);\n      }\n    } catch (e) {\n      console.error('Exception lors de l\\'envoi:', e);\n      setError('Erreur lors de l\\'envoi à Nextera: ' + e.message);\n    } finally {\n      setSendingId(null);\n    }\n  };\n\n  return (\n    <div style={{ padding: 24 }}>\n      <h2>Commandes Shopify reçues</h2>\n      {loading && <p>Chargement...</p>}\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n      {successMsg && <p style={{ color: 'green' }}>{successMsg}</p>}\n      <ul>\n        {orders.map(order => (\n          <li key={order.shopifyOrderId} style={{ marginBottom: 16, borderBottom: '1px solid #eee', paddingBottom: 8 }}>\n            <strong>ID Shopify:</strong> {order.shopifyOrderId}<br />\n            <strong>Date:</strong> {new Date(order.dateReception).toLocaleString()}<br />\n            <details>\n              <summary>Détails bruts</summary>\n              <pre style={{ background: '#f8f8f8', padding: 8 }}>{JSON.stringify(order.data, null, 2)}</pre>\n            </details>\n            <button\n              onClick={() => handleSendToNextera(order.shopifyOrderId)}\n              disabled={sendingId === order.shopifyOrderId}\n              style={{ marginTop: 8, background: '#1976d2', color: 'white', border: 'none', borderRadius: 4, padding: '8px 16px', cursor: 'pointer' }}\n            >\n              {sendingId === order.shopifyOrderId ? 'Envoi en cours...' : 'Envoyer à Nextera'}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default AdminShopifyOrders; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}