{"ast":null,"code":"var _jsxFileName = \"/Users/lbc/Desktop/CRM-J-main/src/AdminShopifyOrders.js\";\nimport React, { useEffect, useState } from 'react';\nfunction AdminShopifyOrders() {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [successMsg, setSuccessMsg] = useState('');\n  const [sendingId, setSendingId] = useState(null);\n  useEffect(() => {\n    fetch('/api/shopify/orders').then(res => res.json()).then(data => {\n      setOrders(data);\n      setLoading(false);\n    }).catch(() => {\n      setError('Erreur lors du chargement des commandes');\n      setLoading(false);\n    });\n  }, []);\n  const handleSendToNextera = async orderId => {\n    console.log('Début de l\\'envoi à Nextera pour la commande:', orderId);\n    setSendingId(orderId);\n    setSuccessMsg('');\n    try {\n      console.log('Envoi de la requête à:', `http://localhost:5001/api/shopify/send-to-nextera/${orderId}`);\n      const res = await fetch(`http://localhost:5001/api/shopify/send-to-nextera/${orderId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Réponse reçue:', res.status);\n      const data = await res.json();\n      console.log('Données reçues:', data);\n      if (res.ok) {\n        setSuccessMsg(`Commande ${orderId} envoyée à Nextera !`);\n      } else {\n        setError(data.error || 'Erreur lors de l\\'envoi à Nextera');\n      }\n    } catch (e) {\n      console.error('Erreur lors de l\\'envoi:', e);\n      setError('Erreur lors de l\\'envoi à Nextera');\n    }\n    setSendingId(null);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, \"Commandes Shopify re\\xE7ues\"), loading && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 19\n    }\n  }, \"Chargement...\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, error), successMsg && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 22\n    }\n  }, successMsg), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, orders.map(order => /*#__PURE__*/React.createElement(\"li\", {\n    key: order.shopifyOrderId,\n    style: {\n      marginBottom: 16,\n      borderBottom: '1px solid #eee',\n      paddingBottom: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"ID Shopify:\"), \" \", order.shopifyOrderId, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 64\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"Date:\"), \" \", new Date(order.dateReception).toLocaleString(), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 84\n    }\n  }), /*#__PURE__*/React.createElement(\"details\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"summary\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, \"D\\xE9tails bruts\"), /*#__PURE__*/React.createElement(\"pre\", {\n    style: {\n      background: '#f8f8f8',\n      padding: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, JSON.stringify(order.data, null, 2))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleSendToNextera(order.shopifyOrderId),\n    disabled: sendingId === order.shopifyOrderId,\n    style: {\n      marginTop: 8,\n      background: '#1976d2',\n      color: 'white',\n      border: 'none',\n      borderRadius: 4,\n      padding: '8px 16px',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, sendingId === order.shopifyOrderId ? 'Envoi en cours...' : 'Envoyer à Nextera')))));\n}\nexport default AdminShopifyOrders;","map":{"version":3,"names":["React","useEffect","useState","AdminShopifyOrders","orders","setOrders","loading","setLoading","error","setError","successMsg","setSuccessMsg","sendingId","setSendingId","fetch","then","res","json","data","catch","handleSendToNextera","orderId","console","log","method","headers","status","ok","e","createElement","style","padding","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","color","map","order","key","shopifyOrderId","marginBottom","borderBottom","paddingBottom","Date","dateReception","toLocaleString","background","JSON","stringify","onClick","disabled","marginTop","border","borderRadius","cursor"],"sources":["/Users/lbc/Desktop/CRM-J-main/src/AdminShopifyOrders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nfunction AdminShopifyOrders() {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [successMsg, setSuccessMsg] = useState('');\n  const [sendingId, setSendingId] = useState(null);\n\n  useEffect(() => {\n    fetch('/api/shopify/orders')\n      .then(res => res.json())\n      .then(data => {\n        setOrders(data);\n        setLoading(false);\n      })\n      .catch(() => {\n        setError('Erreur lors du chargement des commandes');\n        setLoading(false);\n      });\n  }, []);\n\n  const handleSendToNextera = async (orderId) => {\n    console.log('Début de l\\'envoi à Nextera pour la commande:', orderId);\n    setSendingId(orderId);\n    setSuccessMsg('');\n    try {\n      console.log('Envoi de la requête à:', `http://localhost:5001/api/shopify/send-to-nextera/${orderId}`);\n      const res = await fetch(`http://localhost:5001/api/shopify/send-to-nextera/${orderId}`, { \n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Réponse reçue:', res.status);\n      const data = await res.json();\n      console.log('Données reçues:', data);\n      if (res.ok) {\n        setSuccessMsg(`Commande ${orderId} envoyée à Nextera !`);\n      } else {\n        setError(data.error || 'Erreur lors de l\\'envoi à Nextera');\n      }\n    } catch (e) {\n      console.error('Erreur lors de l\\'envoi:', e);\n      setError('Erreur lors de l\\'envoi à Nextera');\n    }\n    setSendingId(null);\n  };\n\n  return (\n    <div style={{ padding: 24 }}>\n      <h2>Commandes Shopify reçues</h2>\n      {loading && <p>Chargement...</p>}\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n      {successMsg && <p style={{ color: 'green' }}>{successMsg}</p>}\n      <ul>\n        {orders.map(order => (\n          <li key={order.shopifyOrderId} style={{ marginBottom: 16, borderBottom: '1px solid #eee', paddingBottom: 8 }}>\n            <strong>ID Shopify:</strong> {order.shopifyOrderId}<br />\n            <strong>Date:</strong> {new Date(order.dateReception).toLocaleString()}<br />\n            <details>\n              <summary>Détails bruts</summary>\n              <pre style={{ background: '#f8f8f8', padding: 8 }}>{JSON.stringify(order.data, null, 2)}</pre>\n            </details>\n            <button\n              onClick={() => handleSendToNextera(order.shopifyOrderId)}\n              disabled={sendingId === order.shopifyOrderId}\n              style={{ marginTop: 8, background: '#1976d2', color: 'white', border: 'none', borderRadius: 4, padding: '8px 16px', cursor: 'pointer' }}\n            >\n              {sendingId === order.shopifyOrderId ? 'Envoi en cours...' : 'Envoyer à Nextera'}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default AdminShopifyOrders; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}