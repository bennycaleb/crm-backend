{"ast":null,"code":"import _objectSpread from\"/Users/lbc/Desktop/CRM-J-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./Register.css';function Register(){const[formData,setFormData]=useState({nom:'',prenom:'',email:'',telephone:'',experience:'non',role:'operateur'});const[passeportFile,setPasseportFile]=useState(null);const[error,setError]=useState('');const[success,setSuccess]=useState(false);const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setFormData(prevState=>_objectSpread(_objectSpread({},prevState),{},{[name]:value}));};const handleFileChange=e=>{const file=e.target.files[0];if(file){if(file.type!=='application/pdf'){setError('Veuillez sélectionner un fichier PDF');e.target.value=null;return;}if(file.size>5*1024*1024){// 5MB\nsetError('Le fichier est trop volumineux. Taille maximale: 5MB');e.target.value=null;return;}setPasseportFile(file);setError('');}};const handleSubmit=async e=>{e.preventDefault();if(!passeportFile){setError('Veuillez télécharger votre passeport en PDF');return;}try{const formDataToSend=new FormData();Object.keys(formData).forEach(key=>{formDataToSend.append(key,formData[key]);});formDataToSend.append('passeportFile',passeportFile);const response=await fetch('http://localhost:5001/api/register',{method:'POST',body:formDataToSend});if(response.ok){setSuccess(true);setTimeout(()=>{navigate('/');},3000);}else{const data=await response.json();setError(data.message||'Une erreur est survenue');}}catch(err){setError('Une erreur est survenue lors de l\\'envoi du formulaire');}};return/*#__PURE__*/React.createElement(\"div\",{className:\"register-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"register-form-container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Inscription\"),error&&/*#__PURE__*/React.createElement(\"div\",{className:\"error-message\"},error),success&&/*#__PURE__*/React.createElement(\"div\",{className:\"success-message\"},\"Votre demande d'inscription a \\xE9t\\xE9 envoy\\xE9e avec succ\\xE8s. Un administrateur vous contactera bient\\xF4t.\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:\"register-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"nom\"},\"Nom\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"nom\",name:\"nom\",value:formData.nom,onChange:handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"prenom\"},\"Pr\\xE9nom\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"prenom\",name:\"prenom\",value:formData.prenom,onChange:handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Adresse email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"telephone\"},\"Num\\xE9ro WhatsApp\"),/*#__PURE__*/React.createElement(\"input\",{type:\"tel\",id:\"telephone\",name:\"telephone\",value:formData.telephone,onChange:handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"passeportFile\"},\"Passeport (PDF)\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"passeportFile\",name:\"passeportFile\",onChange:handleFileChange,accept:\".pdf\",required:true}),/*#__PURE__*/React.createElement(\"small\",{className:\"file-info\"},\"Format accept\\xE9: PDF. Taille maximale: 5MB\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"experience\"},\"Exp\\xE9rience de travail\"),/*#__PURE__*/React.createElement(\"select\",{id:\"experience\",name:\"experience\",value:formData.experience,onChange:handleChange,required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"non\"},\"Non\"),/*#__PURE__*/React.createElement(\"option\",{value:\"oui\"},\"Oui\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"role\"},\"R\\xF4le\"),/*#__PURE__*/React.createElement(\"select\",{id:\"role\",name:\"role\",value:formData.role,onChange:handleChange,required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"operateur\"},\"Op\\xE9rateur\"),/*#__PURE__*/React.createElement(\"option\",{value:\"admin\"},\"Admin\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"submit-button\"},\"Envoyer la demande\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"back-button\",onClick:()=>navigate('/')},\"Retour \\xE0 la connexion\"))));}export default Register;","map":{"version":3,"names":["React","useState","useNavigate","Register","formData","setFormData","nom","prenom","email","telephone","experience","role","passeportFile","setPasseportFile","error","setError","success","setSuccess","navigate","handleChange","e","name","value","target","prevState","_objectSpread","handleFileChange","file","files","type","size","handleSubmit","preventDefault","formDataToSend","FormData","Object","keys","forEach","key","append","response","fetch","method","body","ok","setTimeout","data","json","message","err","createElement","className","onSubmit","htmlFor","id","onChange","required","accept","onClick"],"sources":["/Users/lbc/Desktop/CRM-J-main/src/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Register.css';\n\nfunction Register() {\n  const [formData, setFormData] = useState({\n    nom: '',\n    prenom: '',\n    email: '',\n    telephone: '',\n    experience: 'non',\n    role: 'operateur'\n  });\n  const [passeportFile, setPasseportFile] = useState(null);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        setError('Veuillez sélectionner un fichier PDF');\n        e.target.value = null;\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) { // 5MB\n        setError('Le fichier est trop volumineux. Taille maximale: 5MB');\n        e.target.value = null;\n        return;\n      }\n      setPasseportFile(file);\n      setError('');\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!passeportFile) {\n      setError('Veuillez télécharger votre passeport en PDF');\n      return;\n    }\n\n    try {\n      const formDataToSend = new FormData();\n      Object.keys(formData).forEach(key => {\n        formDataToSend.append(key, formData[key]);\n      });\n      formDataToSend.append('passeportFile', passeportFile);\n\n      const response = await fetch('http://localhost:5001/api/register', {\n        method: 'POST',\n        body: formDataToSend\n      });\n\n      if (response.ok) {\n        setSuccess(true);\n        setTimeout(() => {\n          navigate('/');\n        }, 3000);\n      } else {\n        const data = await response.json();\n        setError(data.message || 'Une erreur est survenue');\n      }\n    } catch (err) {\n      setError('Une erreur est survenue lors de l\\'envoi du formulaire');\n    }\n  };\n\n  return (\n    <div className=\"register-container\">\n      <div className=\"register-form-container\">\n        <h2>Inscription</h2>\n        {error && <div className=\"error-message\">{error}</div>}\n        {success && (\n          <div className=\"success-message\">\n            Votre demande d'inscription a été envoyée avec succès. Un administrateur vous contactera bientôt.\n          </div>\n        )}\n        <form onSubmit={handleSubmit} className=\"register-form\">\n          <div className=\"form-group\">\n            <label htmlFor=\"nom\">Nom</label>\n            <input\n              type=\"text\"\n              id=\"nom\"\n              name=\"nom\"\n              value={formData.nom}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"prenom\">Prénom</label>\n            <input\n              type=\"text\"\n              id=\"prenom\"\n              name=\"prenom\"\n              value={formData.prenom}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Adresse email</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"telephone\">Numéro WhatsApp</label>\n            <input\n              type=\"tel\"\n              id=\"telephone\"\n              name=\"telephone\"\n              value={formData.telephone}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"passeportFile\">Passeport (PDF)</label>\n            <input\n              type=\"file\"\n              id=\"passeportFile\"\n              name=\"passeportFile\"\n              onChange={handleFileChange}\n              accept=\".pdf\"\n              required\n            />\n            <small className=\"file-info\">\n              Format accepté: PDF. Taille maximale: 5MB\n            </small>\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"experience\">Expérience de travail</label>\n            <select\n              id=\"experience\"\n              name=\"experience\"\n              value={formData.experience}\n              onChange={handleChange}\n              required\n            >\n              <option value=\"non\">Non</option>\n              <option value=\"oui\">Oui</option>\n            </select>\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"role\">Rôle</label>\n            <select\n              id=\"role\"\n              name=\"role\"\n              value={formData.role}\n              onChange={handleChange}\n              required\n            >\n              <option value=\"operateur\">Opérateur</option>\n              <option value=\"admin\">Admin</option>\n            </select>\n          </div>\n\n          <button type=\"submit\" className=\"submit-button\">Envoyer la demande</button>\n          <button type=\"button\" className=\"back-button\" onClick={() => navigate('/')}>\n            Retour à la connexion\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Register; "],"mappings":"mJAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,gBAAgB,CAEvB,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGJ,QAAQ,CAAC,CACvCK,GAAG,CAAE,EAAE,CACPC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,EAAE,CACTC,SAAS,CAAE,EAAE,CACbC,UAAU,CAAE,KAAK,CACjBC,IAAI,CAAE,WACR,CAAC,CAAC,CACF,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAiB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAiB,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChClB,WAAW,CAACmB,SAAS,EAAAC,aAAA,CAAAA,aAAA,IAChBD,SAAS,MACZ,CAACH,IAAI,EAAGC,KAAK,EACb,CAAC,CACL,CAAC,CAED,KAAM,CAAAI,gBAAgB,CAAIN,CAAC,EAAK,CAC9B,KAAM,CAAAO,IAAI,CAAGP,CAAC,CAACG,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAC9B,GAAID,IAAI,CAAE,CACR,GAAIA,IAAI,CAACE,IAAI,GAAK,iBAAiB,CAAE,CACnCd,QAAQ,CAAC,sCAAsC,CAAC,CAChDK,CAAC,CAACG,MAAM,CAACD,KAAK,CAAG,IAAI,CACrB,OACF,CACA,GAAIK,IAAI,CAACG,IAAI,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE,CAAE;AACjCf,QAAQ,CAAC,sDAAsD,CAAC,CAChEK,CAAC,CAACG,MAAM,CAACD,KAAK,CAAG,IAAI,CACrB,OACF,CACAT,gBAAgB,CAACc,IAAI,CAAC,CACtBZ,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAC,CAED,KAAM,CAAAgB,YAAY,CAAG,KAAO,CAAAX,CAAC,EAAK,CAChCA,CAAC,CAACY,cAAc,CAAC,CAAC,CAClB,GAAI,CAACpB,aAAa,CAAE,CAClBG,QAAQ,CAAC,6CAA6C,CAAC,CACvD,OACF,CAEA,GAAI,CACF,KAAM,CAAAkB,cAAc,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CACrCC,MAAM,CAACC,IAAI,CAAChC,QAAQ,CAAC,CAACiC,OAAO,CAACC,GAAG,EAAI,CACnCL,cAAc,CAACM,MAAM,CAACD,GAAG,CAAElC,QAAQ,CAACkC,GAAG,CAAC,CAAC,CAC3C,CAAC,CAAC,CACFL,cAAc,CAACM,MAAM,CAAC,eAAe,CAAE3B,aAAa,CAAC,CAErD,KAAM,CAAA4B,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoC,CAAE,CACjEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEV,cACR,CAAC,CAAC,CAEF,GAAIO,QAAQ,CAACI,EAAE,CAAE,CACf3B,UAAU,CAAC,IAAI,CAAC,CAChB4B,UAAU,CAAC,IAAM,CACf3B,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,IAAM,CACL,KAAM,CAAA4B,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClChC,QAAQ,CAAC+B,IAAI,CAACE,OAAO,EAAI,yBAAyB,CAAC,CACrD,CACF,CAAE,MAAOC,GAAG,CAAE,CACZlC,QAAQ,CAAC,wDAAwD,CAAC,CACpE,CACF,CAAC,CAED,mBACEf,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,oBAAoB,eACjCnD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,yBAAyB,eACtCnD,KAAA,CAAAkD,aAAA,WAAI,aAAe,CAAC,CACnBpC,KAAK,eAAId,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,eAAe,EAAErC,KAAW,CAAC,CACrDE,OAAO,eACNhB,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,iBAAiB,EAAC,kHAE5B,CACN,cACDnD,KAAA,CAAAkD,aAAA,SAAME,QAAQ,CAAErB,YAAa,CAACoB,SAAS,CAAC,eAAe,eACrDnD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,KAAK,EAAC,KAAU,CAAC,cAChCrD,KAAA,CAAAkD,aAAA,UACErB,IAAI,CAAC,MAAM,CACXyB,EAAE,CAAC,KAAK,CACRjC,IAAI,CAAC,KAAK,CACVC,KAAK,CAAElB,QAAQ,CAACE,GAAI,CACpBiD,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,MACT,CACE,CAAC,cAENxD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,QAAQ,EAAC,WAAa,CAAC,cACtCrD,KAAA,CAAAkD,aAAA,UACErB,IAAI,CAAC,MAAM,CACXyB,EAAE,CAAC,QAAQ,CACXjC,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAElB,QAAQ,CAACG,MAAO,CACvBgD,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,MACT,CACE,CAAC,cAENxD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,OAAO,EAAC,eAAoB,CAAC,cAC5CrD,KAAA,CAAAkD,aAAA,UACErB,IAAI,CAAC,OAAO,CACZyB,EAAE,CAAC,OAAO,CACVjC,IAAI,CAAC,OAAO,CACZC,KAAK,CAAElB,QAAQ,CAACI,KAAM,CACtB+C,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,MACT,CACE,CAAC,cAENxD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,WAAW,EAAC,oBAAsB,CAAC,cAClDrD,KAAA,CAAAkD,aAAA,UACErB,IAAI,CAAC,KAAK,CACVyB,EAAE,CAAC,WAAW,CACdjC,IAAI,CAAC,WAAW,CAChBC,KAAK,CAAElB,QAAQ,CAACK,SAAU,CAC1B8C,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,MACT,CACE,CAAC,cAENxD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,eAAe,EAAC,iBAAsB,CAAC,cACtDrD,KAAA,CAAAkD,aAAA,UACErB,IAAI,CAAC,MAAM,CACXyB,EAAE,CAAC,eAAe,CAClBjC,IAAI,CAAC,eAAe,CACpBkC,QAAQ,CAAE7B,gBAAiB,CAC3B+B,MAAM,CAAC,MAAM,CACbD,QAAQ,MACT,CAAC,cACFxD,KAAA,CAAAkD,aAAA,UAAOC,SAAS,CAAC,WAAW,EAAC,8CAEtB,CACJ,CAAC,cAENnD,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,YAAY,EAAC,0BAA4B,CAAC,cACzDrD,KAAA,CAAAkD,aAAA,WACEI,EAAE,CAAC,YAAY,CACfjC,IAAI,CAAC,YAAY,CACjBC,KAAK,CAAElB,QAAQ,CAACM,UAAW,CAC3B6C,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,oBAERxD,KAAA,CAAAkD,aAAA,WAAQ5B,KAAK,CAAC,KAAK,EAAC,KAAW,CAAC,cAChCtB,KAAA,CAAAkD,aAAA,WAAQ5B,KAAK,CAAC,KAAK,EAAC,KAAW,CACzB,CACL,CAAC,cAENtB,KAAA,CAAAkD,aAAA,QAAKC,SAAS,CAAC,YAAY,eACzBnD,KAAA,CAAAkD,aAAA,UAAOG,OAAO,CAAC,MAAM,EAAC,SAAW,CAAC,cAClCrD,KAAA,CAAAkD,aAAA,WACEI,EAAE,CAAC,MAAM,CACTjC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAElB,QAAQ,CAACO,IAAK,CACrB4C,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,oBAERxD,KAAA,CAAAkD,aAAA,WAAQ5B,KAAK,CAAC,WAAW,EAAC,cAAiB,CAAC,cAC5CtB,KAAA,CAAAkD,aAAA,WAAQ5B,KAAK,CAAC,OAAO,EAAC,OAAa,CAC7B,CACL,CAAC,cAENtB,KAAA,CAAAkD,aAAA,WAAQrB,IAAI,CAAC,QAAQ,CAACsB,SAAS,CAAC,eAAe,EAAC,oBAA0B,CAAC,cAC3EnD,KAAA,CAAAkD,aAAA,WAAQrB,IAAI,CAAC,QAAQ,CAACsB,SAAS,CAAC,aAAa,CAACO,OAAO,CAAEA,CAAA,GAAMxC,QAAQ,CAAC,GAAG,CAAE,EAAC,0BAEpE,CACJ,CACH,CACF,CAAC,CAEV,CAEA,cAAe,CAAAf,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}