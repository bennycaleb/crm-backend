{"ast":null,"code":"import _objectSpread from\"/Users/lbc/Desktop/CRM-J-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect,useRef}from'react';import'./CRM.css';const statusList=[{label:'Connecté',color:'#4caf50',max:72000},// 20h\n{label:'Hors ligne',color:'#bdbdbd'},{label:'Pause',color:'#ffb300',max:5400},// 1h30\n{label:'Formation',color:'#1976d2'}];const callStatusList=['Appel sans réponse','Rappel','Validation','Refus','Poubelle'];const tabs=['Principal','Demandes','Contacts supplémentaires','Panier'];function getRandomDeliveryDate(){const now=new Date();const daysToAdd=Math.floor(Math.random()*2)+2;// 2 ou 3 jours\nconst delivery=new Date(now);delivery.setDate(now.getDate()+daysToAdd);return delivery.toISOString().split('T')[0];}function getMinDeliveryDate(){const now=new Date();now.setDate(now.getDate()+2);return now.toISOString().split('T')[0];}function getMaxDeliveryDate(){const now=new Date();let added=0;while(added<5){now.setDate(now.getDate()+1);// 0 = dimanche, 6 = samedi\nif(now.getDay()!==0&&now.getDay()!==6){added++;}}return now.toISOString().split('T')[0];}function CRM(){// Onglets\nconst[activeTab,setActiveTab]=useState('Principal');// Statut opérateur\nconst[status,setStatus]=useState('Connecté');// Chronomètres pour chaque statut\nconst[statusTimes,setStatusTimes]=useState({'Connecté':0,'Hors ligne':0,'Pause':0,'Formation':0});const statusTimerRef=useRef();// Appel\nconst[callState,setCallState]=useState('ringing');// 'ringing', 'in-call', 'ended'\nconst[callSeconds,setCallSeconds]=useState(0);const callTimerRef=useRef();// Formulaire\nconst[callStatus,setCallStatus]=useState(callStatusList[0]);const[client,setClient]=useState({name:'',phone:'06 12 34 56 78'});const[address,setAddress]=useState({rue:'',numero:'',codePostal:'',ville:'',region:'',appartement:'',etage:'',entree:''});const[cart,setCart]=useState([{produit:'',prix:'',quantite:'',frais:'',tva:''}]);const[orderSaved,setOrderSaved]=useState(false);// Timer de traitement\nconst[showTreatmentTimer,setShowTreatmentTimer]=useState(false);const[treatmentSeconds,setTreatmentSeconds]=useState(0);const treatmentTimerRef=useRef();const[addressSuggestions,setAddressSuggestions]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[recallDate,setRecallDate]=useState('');const[refusalReason,setRefusalReason]=useState('');const[trashReason,setTrashReason]=useState('');const[formError,setFormError]=useState('');const[dateLivraison,setDateLivraison]=useState('');// Liste des commandes\nconst[orders,setOrders]=useState([]);const[loadingOrders,setLoadingOrders]=useState(true);const[apiError,setApiError]=useState(null);// Charger les commandes depuis l'API\nuseEffect(()=>{async function fetchOrders(){setLoadingOrders(true);setApiError(null);try{const res=await fetch('/api/orders');if(!res.ok)throw new Error('API non disponible');const data=await res.json();setOrders(data);}catch(e){setApiError('Impossible de contacter le serveur des commandes. Vérifiez que le backend est bien lancé.');}setLoadingOrders(false);}fetchOrders();// Rafraîchir les commandes toutes les 30 secondes\nconst interval=setInterval(fetchOrders,30000);return()=>clearInterval(interval);},[]);// Chronomètre statut\nuseEffect(()=>{clearInterval(statusTimerRef.current);statusTimerRef.current=setInterval(()=>{setStatusTimes(times=>_objectSpread(_objectSpread({},times),{},{[status]:times[status]+1}));},1000);return()=>clearInterval(statusTimerRef.current);},[status]);// Chronomètre appel\nuseEffect(()=>{if(callState==='in-call'){callTimerRef.current=setInterval(()=>{setCallSeconds(s=>s+1);},1000);}else{clearInterval(callTimerRef.current);setCallSeconds(0);}return()=>clearInterval(callTimerRef.current);},[callState]);// Timer de traitement : démarre après raccrochage\nuseEffect(()=>{if(callState==='ended'){setShowTreatmentTimer(true);setTreatmentSeconds(0);treatmentTimerRef.current=setInterval(()=>{setTreatmentSeconds(s=>s+1);},1000);}else{setShowTreatmentTimer(false);setTreatmentSeconds(0);clearInterval(treatmentTimerRef.current);}return()=>clearInterval(treatmentTimerRef.current);},[callState]);// Arrêt du timer de traitement après enregistrement\nuseEffect(()=>{if(orderSaved){setShowTreatmentTimer(false);setTreatmentSeconds(0);clearInterval(treatmentTimerRef.current);}},[orderSaved]);// Quand le statut change, si Validation, génère la date de livraison\nuseEffect(()=>{if(callStatus==='Validation'){setDateLivraison(getRandomDeliveryDate());}else{setDateLivraison('');}},[callStatus]);// Quand le statut change, reset la date de livraison si pas Validation\nuseEffect(()=>{if(callStatus!=='Validation'){setDateLivraison('');}},[callStatus]);const formatTime=s=>{const m=Math.floor(s/60).toString().padStart(2,'0');const sec=(s%60).toString().padStart(2,'0');return\"\".concat(m,\":\").concat(sec);};const formatTimeHMS=s=>{const h=Math.floor(s/3600).toString().padStart(2,'0');const m=Math.floor(s%3600/60).toString().padStart(2,'0');const sec=(s%60).toString().padStart(2,'0');return\"\".concat(h,\":\").concat(m,\":\").concat(sec);};// Ajout d'une ligne au panier\nconst addCartLine=()=>{setCart([...cart,{produit:'',prix:'',quantite:'',frais:'',tva:''}]);};// Modification d'une ligne du panier\nconst updateCartLine=(idx,field,value)=>{const newCart=cart.map((item,i)=>i===idx?_objectSpread(_objectSpread({},item),{},{[field]:value}):item);setCart(newCart);};// Déconnexion\nconst handleLogout=()=>{window.location.href='/';};// Enregistrer la commande\nconst handleSaveOrder=async e=>{var _cart$,_cart$2,_cart$3;e.preventDefault();setFormError('');if(callStatus==='Validation'&&!dateLivraison){setFormError('Veuillez choisir la date de livraison.');return;}// Validation selon le statut\nif(callStatus==='Rappel'){if(!recallDate){setFormError('Veuillez choisir la date et l\\'heure du rappel.');return;}// Vérifier que la date est dans les 3 jours\nconst now=new Date();const recall=new Date(recallDate);const diff=(recall-now)/(1000*60*60*24);if(diff<0||diff>3){setFormError('La date de rappel doit être dans les 3 jours à venir.');return;}}if(callStatus==='Refus'&&!refusalReason.trim()){setFormError('Veuillez indiquer la raison du refus.');return;}if(callStatus==='Poubelle'&&!trashReason.trim()){setFormError('Veuillez indiquer la raison pour la poubelle.');return;}// Générer un ID unique pour la commande\nconst timestamp=new Date().getTime();const random=Math.floor(Math.random()*1000);const orderId=\"CMD\".concat(timestamp).concat(random);// Construction de la commande à envoyer à l'admin\nconst orderToSend={id:orderId,nom:client.name.split(' ')[0]||'',prenom:client.name.split(' ').slice(1).join(' ')||'',phone:client.phone,adresse:Object.values(address).filter(Boolean).join(', '),date:dateLivraison||new Date().toISOString().split('T')[0],produit:((_cart$=cart[0])===null||_cart$===void 0?void 0:_cart$.produit)||'',quantite:parseInt((_cart$2=cart[0])===null||_cart$2===void 0?void 0:_cart$2.quantite)||1,prix:parseFloat((_cart$3=cart[0])===null||_cart$3===void 0?void 0:_cart$3.prix)||0,statut:callStatus==='Validation'?'Validée':'En attente',logistique:false,operateur:'Opérateur',// Ajout de l'opérateur\ncanal:'Téléphone',// Ajout du canal\nhistorique:[{date:new Date().toISOString().split('T')[0],action:'Création',utilisateur:'Opérateur'}]};try{const response=await fetch('/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(orderToSend)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Erreur lors de l\\'enregistrement de la commande');}const savedOrder=await response.json();setOrders(prevOrders=>[...prevOrders,savedOrder]);setOrderSaved(true);setFormError('');// Réinitialiser les erreurs\nsetTimeout(()=>setOrderSaved(false),2000);setCallState('ringing');// relance un appel\nsetRecallDate('');setRefusalReason('');setTrashReason('');setDateLivraison('');// Réinitialiser le panier\nsetCart([{produit:'',prix:'',quantite:'',frais:'',tva:''}]);}catch(err){console.error('Erreur lors de l\\'enregistrement:',err);setFormError(err.message||'Erreur lors de l\\'enregistrement de la commande. Veuillez réessayer.');}};// Fonction de recherche d'adresse\nconst searchAddress=async query=>{if(query.length<3){setAddressSuggestions([]);return;}try{const response=await fetch(\"https://api-adresse.data.gouv.fr/search/?q=\".concat(encodeURIComponent(query),\"&limit=5\"));const data=await response.json();setAddressSuggestions(data.features||[]);setShowSuggestions(true);}catch(error){console.error('Erreur lors de la recherche d\\'adresse:',error);setAddressSuggestions([]);}};// Sélection d'une adresse\nconst selectAddress=feature=>{const properties=feature.properties;setAddress(_objectSpread(_objectSpread({},address),{},{numero:properties.housenumber||'',rue:properties.street||'',codePostal:properties.postcode||'',ville:properties.city||'',region:properties.context||''}));setSearchQuery(\"\".concat(properties.housenumber||'',\" \").concat(properties.street||'',\", \").concat(properties.postcode||'',\" \").concat(properties.city||''));setShowSuggestions(false);};return/*#__PURE__*/React.createElement(\"div\",{className:\"crm-legacy-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-header-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-tabs\"},tabs.map(tab=>/*#__PURE__*/React.createElement(\"div\",{key:tab,className:\"crm-tab\".concat(activeTab===tab?' active':''),onClick:()=>setActiveTab(tab)},tab))),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-logout\",onClick:handleLogout},\"D\\xE9connexion\")),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-brand\"},/*#__PURE__*/React.createElement(\"span\",{className:\"crm-brand-main\"},\"C-\",/*#__PURE__*/React.createElement(\"span\",{className:\"crm-brand-accent\"},\"INNOVATECH\"),\" Solutions\")),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-legacy-content\"},activeTab==='Panier'?/*#__PURE__*/React.createElement(\"div\",{style:{maxWidth:950,margin:'0 auto',textAlign:'left',background:'#fff',borderRadius:16,boxShadow:'0 2px 12px rgba(0,0,0,0.07)',padding:'32px 28px 24px 28px',border:'1.5px solid #e0e0e0'}},/*#__PURE__*/React.createElement(\"h2\",{style:{fontWeight:800,fontSize:'1.6rem',marginBottom:32,textAlign:'center',letterSpacing:1}},\"Mes commandes\"),apiError&&/*#__PURE__*/React.createElement(\"div\",{style:{color:'#e53935',marginBottom:16,padding:12,background:'#ffebee',borderRadius:8,border:'1px solid #ffcdd2'}},apiError),/*#__PURE__*/React.createElement(\"div\",{style:{overflowX:'auto'}},/*#__PURE__*/React.createElement(\"table\",{style:{width:'100%',borderCollapse:'separate',borderSpacing:0,fontSize:'0.99rem',background:'#fff',borderRadius:10}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{style:{background:'#f7f8fa'}},/*#__PURE__*/React.createElement(\"th\",{style:{padding:'10px 8px',fontWeight:700,color:'#222'}},\"ID\"),/*#__PURE__*/React.createElement(\"th\",{style:{padding:'10px 8px',fontWeight:700,color:'#222'}},\"Client\"),/*#__PURE__*/React.createElement(\"th\",{style:{padding:'10px 8px',fontWeight:700,color:'#222'}},\"Produit\"),/*#__PURE__*/React.createElement(\"th\",{style:{padding:'10px 8px',fontWeight:700,color:'#222'}},\"Date\"),/*#__PURE__*/React.createElement(\"th\",{style:{padding:'10px 8px',fontWeight:700,color:'#222'}},\"Statut\"))),/*#__PURE__*/React.createElement(\"tbody\",null,orders.map(order=>/*#__PURE__*/React.createElement(\"tr\",{key:order.id,style:{borderBottom:'1px solid #f0f0f0'}},/*#__PURE__*/React.createElement(\"td\",{style:{padding:'12px 8px'}},order.id),/*#__PURE__*/React.createElement(\"td\",{style:{padding:'12px 8px'}},order.nom,\" \",order.prenom),/*#__PURE__*/React.createElement(\"td\",{style:{padding:'12px 8px'}},order.produit),/*#__PURE__*/React.createElement(\"td\",{style:{padding:'12px 8px'}},new Date(order.date).toLocaleDateString('fr-FR')),/*#__PURE__*/React.createElement(\"td\",{style:{padding:'12px 8px'}},/*#__PURE__*/React.createElement(\"span\",{style:{padding:'4px 8px',borderRadius:12,fontSize:'0.9rem',fontWeight:600,background:order.statut==='En attente'?'#fff3e0':order.statut==='Validée'?'#e8f5e9':order.statut==='Expédiée'?'#e3f2fd':order.statut==='Livrée'?'#f3e5f5':'#ffebee',color:order.statut==='En attente'?'#e65100':order.statut==='Validée'?'#2e7d32':order.statut==='Expédiée'?'#1565c0':order.statut==='Livrée'?'#6a1b9a':'#c62828'}},order.statut)))))))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:320,maxWidth:340,marginRight:32}},/*#__PURE__*/React.createElement(\"div\",{className:\"phonecall-box\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',gap:10}},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:'2rem',color:'#e53935'}},\"\\u23F0\"),/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:'bold',color:'#e53935'}},\"Appel entrant...\")),callState==='ringing'&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:12,display:'flex',gap:12}},/*#__PURE__*/React.createElement(\"button\",{className:\"btn-phonecall green big\",onClick:()=>setCallState('in-call')},\"D\\xE9crocher\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-phonecall red big\",onClick:()=>setCallState('ended')},\"Raccrocher\")),callState==='in-call'&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:12}},/*#__PURE__*/React.createElement(\"span\",{className:\"phonecall-inprogress-label\"},\"En appel\\u2026\"),/*#__PURE__*/React.createElement(\"span\",{className:\"phonecall-timer\"},formatTime(callSeconds)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-phonecall red big\",style:{marginLeft:18},onClick:()=>setCallState('ended')},\"Raccrocher\")),callState==='ended'&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:12}},/*#__PURE__*/React.createElement(\"span\",{className:\"phonecall-ended\"},\"Appel termin\\xE9\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-newcall\",style:{marginLeft:18},onClick:()=>setCallState('ringing')},\"Simuler un appel\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-controls-block-belowcall\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-title\"},\"Contr\\xF4le\"),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-controls\"},statusList.map(s=>{const time=statusTimes[s.label]||0;const isCurrent=status===s.label;const isLate=s.max&&time>=s.max;return/*#__PURE__*/React.createElement(\"button\",{key:s.label,type:\"button\",className:\"btn-control \".concat(s.label.normalize('NFD').replace(/[\u0000-\\u036f]/g,'').toLowerCase().replace(/ /g,'')).concat(isCurrent?' selected':''),onClick:()=>setStatus(s.label)},s.label,/*#__PURE__*/React.createElement(\"span\",{className:\"status-timer\".concat(isLate?' late':'')},formatTimeHMS(time)),isLate&&s.label==='Pause'&&/*#__PURE__*/React.createElement(\"span\",{className:\"status-warning\"},\"\\u23F0 max 1h30 !\"),isLate&&s.label==='Connecté'&&/*#__PURE__*/React.createElement(\"span\",{className:\"status-warning\"},\"\\u23F0 max 20h !\"));})))),/*#__PURE__*/React.createElement(\"form\",{className:\"crm-form\",onSubmit:handleSaveOrder},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-title\"},\"Informations client\"),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-grid-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Nom et pr\\xE9nom\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:client.name,onChange:e=>setClient(_objectSpread(_objectSpread({},client),{},{name:e.target.value}))})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Num\\xE9ro de t\\xE9l\\xE9phone\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:client.phone,onChange:e=>setClient(_objectSpread(_objectSpread({},client),{},{phone:e.target.value}))}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-block\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',gap:12,marginBottom:12}},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-title\",style:{marginBottom:0}},\"Adresse de livraison\"),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\",style:{minWidth:220,width:280,marginBottom:0,position:'relative'}},/*#__PURE__*/React.createElement(\"label\",{style:{display:'none'}},\"Rechercher une adresse\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);searchAddress(e.target.value);},placeholder:\"Rechercher une adresse...\",style:{width:'100%'}}),showSuggestions&&addressSuggestions.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"address-suggestions\"},addressSuggestions.map((suggestion,index)=>/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"suggestion-item\",onClick:()=>selectAddress(suggestion)},suggestion.properties.label))))),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-grid-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Rue\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.rue,readOnly:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Num\\xE9ro\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.numero,readOnly:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Code postal\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.codePostal,readOnly:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Ville\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.ville,readOnly:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-grid-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"R\\xE9gion\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.region,onChange:e=>setAddress(_objectSpread(_objectSpread({},address),{},{region:e.target.value}))})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Appartement\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.appartement,onChange:e=>setAddress(_objectSpread(_objectSpread({},address),{},{appartement:e.target.value}))})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Entr\\xE9e\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:address.entree,onChange:e=>setAddress(_objectSpread(_objectSpread({},address),{},{entree:e.target.value}))})))),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-title\"},\"Statut apr\\xE8s l'appel\"),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\",style:{maxWidth:'300px'}},/*#__PURE__*/React.createElement(\"select\",{value:callStatus,onChange:e=>setCallStatus(e.target.value)},callStatusList.map(s=>/*#__PURE__*/React.createElement(\"option\",{key:s},s)))),callStatus==='Rappel'&&/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\",style:{maxWidth:320}},/*#__PURE__*/React.createElement(\"label\",null,\"Date et heure du rappel (dans les 3 jours)\"),/*#__PURE__*/React.createElement(\"input\",{type:\"datetime-local\",value:recallDate,min:new Date().toISOString().slice(0,16),max:(()=>{const d=new Date();d.setDate(d.getDate()+3);return d.toISOString().slice(0,16);})(),onChange:e=>setRecallDate(e.target.value)})),callStatus==='Refus'&&/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\",style:{maxWidth:320}},/*#__PURE__*/React.createElement(\"label\",null,\"Raison du refus\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:refusalReason,onChange:e=>setRefusalReason(e.target.value),placeholder:\"Indiquez la raison du refus\"})),callStatus==='Poubelle'&&/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\",style:{maxWidth:320}},/*#__PURE__*/React.createElement(\"label\",null,\"Raison pour la poubelle\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:trashReason,onChange:e=>setTrashReason(e.target.value),placeholder:\"Indiquez la raison\"})),callStatus==='Validation'&&/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\",style:{maxWidth:320}},/*#__PURE__*/React.createElement(\"label\",null,\"Date de livraison pr\\xE9vue\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",value:dateLivraison,min:getMinDeliveryDate(),max:getMaxDeliveryDate(),onChange:e=>setDateLivraison(e.target.value),required:true})),formError&&/*#__PURE__*/React.createElement(\"div\",{style:{color:'#e53935',marginTop:8,fontWeight:600}},formError)),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-title\"},\"Panier\"),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-grid-5\"},cart.map((item,idx)=>/*#__PURE__*/React.createElement(React.Fragment,{key:idx},/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Nom de produit\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:item.produit,onChange:e=>updateCartLine(idx,'produit',e.target.value)})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Prix\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:item.prix,onChange:e=>updateCartLine(idx,'prix',e.target.value)})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Quantit\\xE9\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:item.quantite,onChange:e=>updateCartLine(idx,'quantite',e.target.value)})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"Frais de livraison\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:item.frais,onChange:e=>updateCartLine(idx,'frais',e.target.value)})),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"TVA\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:item.tva,onChange:e=>updateCartLine(idx,'tva',e.target.value)}))))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"crm-btn-add\",onClick:addCartLine},\"Ajouter un produit\")),showTreatmentTimer&&/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-timer-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"treatment-timer-label\"},\"Temps de traitement de la commande :\"),/*#__PURE__*/React.createElement(\"span\",{className:\"treatment-timer-value\".concat(treatmentSeconds>=600?' late':'')},formatTime(treatmentSeconds)),treatmentSeconds>=600&&/*#__PURE__*/React.createElement(\"span\",{className:\"treatment-timer-warning\"},\"\\u23F0 D\\xE9passement !\")),/*#__PURE__*/React.createElement(\"div\",{className:\"crm-section-block\",style:{textAlign:'center',marginTop:18}},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn-save-order\"},\"Enregistrer la commande\"),orderSaved&&/*#__PURE__*/React.createElement(\"span\",{className:\"order-saved-msg\"},\"Commande enregistr\\xE9e !\"))))));}export default CRM;","map":{"version":3,"names":["React","useState","useEffect","useRef","statusList","label","color","max","callStatusList","tabs","getRandomDeliveryDate","now","Date","daysToAdd","Math","floor","random","delivery","setDate","getDate","toISOString","split","getMinDeliveryDate","getMaxDeliveryDate","added","getDay","CRM","activeTab","setActiveTab","status","setStatus","statusTimes","setStatusTimes","statusTimerRef","callState","setCallState","callSeconds","setCallSeconds","callTimerRef","callStatus","setCallStatus","client","setClient","name","phone","address","setAddress","rue","numero","codePostal","ville","region","appartement","etage","entree","cart","setCart","produit","prix","quantite","frais","tva","orderSaved","setOrderSaved","showTreatmentTimer","setShowTreatmentTimer","treatmentSeconds","setTreatmentSeconds","treatmentTimerRef","addressSuggestions","setAddressSuggestions","showSuggestions","setShowSuggestions","searchQuery","setSearchQuery","recallDate","setRecallDate","refusalReason","setRefusalReason","trashReason","setTrashReason","formError","setFormError","dateLivraison","setDateLivraison","orders","setOrders","loadingOrders","setLoadingOrders","apiError","setApiError","fetchOrders","res","fetch","ok","Error","data","json","e","interval","setInterval","clearInterval","current","times","_objectSpread","s","formatTime","m","toString","padStart","sec","concat","formatTimeHMS","h","addCartLine","updateCartLine","idx","field","value","newCart","map","item","i","handleLogout","window","location","href","handleSaveOrder","_cart$","_cart$2","_cart$3","preventDefault","recall","diff","trim","timestamp","getTime","orderId","orderToSend","id","nom","prenom","slice","join","adresse","Object","values","filter","Boolean","date","parseInt","parseFloat","statut","logistique","operateur","canal","historique","action","utilisateur","response","method","headers","body","JSON","stringify","errorData","error","savedOrder","prevOrders","setTimeout","err","console","message","searchAddress","query","length","encodeURIComponent","features","selectAddress","feature","properties","housenumber","street","postcode","city","context","createElement","className","tab","key","onClick","style","maxWidth","margin","textAlign","background","borderRadius","boxShadow","padding","border","fontWeight","fontSize","marginBottom","letterSpacing","overflowX","width","borderCollapse","borderSpacing","order","borderBottom","toLocaleDateString","Fragment","minWidth","marginRight","display","alignItems","gap","marginTop","marginLeft","time","isCurrent","isLate","type","normalize","replace","toLowerCase","onSubmit","onChange","target","position","placeholder","suggestion","index","readOnly","min","d","required"],"sources":["/Users/lbc/Desktop/CRM-J-main/src/CRM.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './CRM.css';\n\nconst statusList = [\n  { label: 'Connecté', color: '#4caf50', max: 72000 }, // 20h\n  { label: 'Hors ligne', color: '#bdbdbd' },\n  { label: 'Pause', color: '#ffb300', max: 5400 }, // 1h30\n  { label: 'Formation', color: '#1976d2' }\n];\n\nconst callStatusList = [\n  'Appel sans réponse',\n  'Rappel',\n  'Validation',\n  'Refus',\n  'Poubelle'\n];\n\nconst tabs = [\n  'Principal',\n  'Demandes',\n  'Contacts supplémentaires',\n  'Panier'\n];\n\nfunction getRandomDeliveryDate() {\n  const now = new Date();\n  const daysToAdd = Math.floor(Math.random() * 2) + 2; // 2 ou 3 jours\n  const delivery = new Date(now);\n  delivery.setDate(now.getDate() + daysToAdd);\n  return delivery.toISOString().split('T')[0];\n}\n\nfunction getMinDeliveryDate() {\n  const now = new Date();\n  now.setDate(now.getDate() + 2);\n  return now.toISOString().split('T')[0];\n}\n\nfunction getMaxDeliveryDate() {\n  const now = new Date();\n  let added = 0;\n  while (added < 5) {\n    now.setDate(now.getDate() + 1);\n    // 0 = dimanche, 6 = samedi\n    if (now.getDay() !== 0 && now.getDay() !== 6) {\n      added++;\n    }\n  }\n  return now.toISOString().split('T')[0];\n}\n\nfunction CRM() {\n  // Onglets\n  const [activeTab, setActiveTab] = useState('Principal');\n  // Statut opérateur\n  const [status, setStatus] = useState('Connecté');\n  // Chronomètres pour chaque statut\n  const [statusTimes, setStatusTimes] = useState({\n    'Connecté': 0,\n    'Hors ligne': 0,\n    'Pause': 0,\n    'Formation': 0\n  });\n  const statusTimerRef = useRef();\n  // Appel\n  const [callState, setCallState] = useState('ringing'); // 'ringing', 'in-call', 'ended'\n  const [callSeconds, setCallSeconds] = useState(0);\n  const callTimerRef = useRef();\n  // Formulaire\n  const [callStatus, setCallStatus] = useState(callStatusList[0]);\n  const [client, setClient] = useState({ name: '', phone: '06 12 34 56 78' });\n  const [address, setAddress] = useState({\n    rue: '', numero: '', codePostal: '', ville: '',\n    region: '', appartement: '', etage: '', entree: ''\n  });\n  const [cart, setCart] = useState([\n    { produit: '', prix: '', quantite: '', frais: '', tva: '' }\n  ]);\n  const [orderSaved, setOrderSaved] = useState(false);\n  // Timer de traitement\n  const [showTreatmentTimer, setShowTreatmentTimer] = useState(false);\n  const [treatmentSeconds, setTreatmentSeconds] = useState(0);\n  const treatmentTimerRef = useRef();\n  const [addressSuggestions, setAddressSuggestions] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [recallDate, setRecallDate] = useState('');\n  const [refusalReason, setRefusalReason] = useState('');\n  const [trashReason, setTrashReason] = useState('');\n  const [formError, setFormError] = useState('');\n  const [dateLivraison, setDateLivraison] = useState('');\n  // Liste des commandes\n  const [orders, setOrders] = useState([]);\n  const [loadingOrders, setLoadingOrders] = useState(true);\n  const [apiError, setApiError] = useState(null);\n\n  // Charger les commandes depuis l'API\n  useEffect(() => {\n    async function fetchOrders() {\n      setLoadingOrders(true);\n      setApiError(null);\n      try {\n        const res = await fetch('/api/orders');\n        if (!res.ok) throw new Error('API non disponible');\n        const data = await res.json();\n        setOrders(data);\n      } catch (e) {\n        setApiError('Impossible de contacter le serveur des commandes. Vérifiez que le backend est bien lancé.');\n      }\n      setLoadingOrders(false);\n    }\n    fetchOrders();\n\n    // Rafraîchir les commandes toutes les 30 secondes\n    const interval = setInterval(fetchOrders, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Chronomètre statut\n  useEffect(() => {\n    clearInterval(statusTimerRef.current);\n    statusTimerRef.current = setInterval(() => {\n      setStatusTimes(times => ({\n        ...times,\n        [status]: times[status] + 1\n      }));\n    }, 1000);\n    return () => clearInterval(statusTimerRef.current);\n  }, [status]);\n\n  // Chronomètre appel\n  useEffect(() => {\n    if (callState === 'in-call') {\n      callTimerRef.current = setInterval(() => {\n        setCallSeconds(s => s + 1);\n      }, 1000);\n    } else {\n      clearInterval(callTimerRef.current);\n      setCallSeconds(0);\n    }\n    return () => clearInterval(callTimerRef.current);\n  }, [callState]);\n\n  // Timer de traitement : démarre après raccrochage\n  useEffect(() => {\n    if (callState === 'ended') {\n      setShowTreatmentTimer(true);\n      setTreatmentSeconds(0);\n      treatmentTimerRef.current = setInterval(() => {\n        setTreatmentSeconds(s => s + 1);\n      }, 1000);\n    } else {\n      setShowTreatmentTimer(false);\n      setTreatmentSeconds(0);\n      clearInterval(treatmentTimerRef.current);\n    }\n    return () => clearInterval(treatmentTimerRef.current);\n  }, [callState]);\n\n  // Arrêt du timer de traitement après enregistrement\n  useEffect(() => {\n    if (orderSaved) {\n      setShowTreatmentTimer(false);\n      setTreatmentSeconds(0);\n      clearInterval(treatmentTimerRef.current);\n    }\n  }, [orderSaved]);\n\n  // Quand le statut change, si Validation, génère la date de livraison\n  useEffect(() => {\n    if (callStatus === 'Validation') {\n      setDateLivraison(getRandomDeliveryDate());\n    } else {\n      setDateLivraison('');\n    }\n  }, [callStatus]);\n\n  // Quand le statut change, reset la date de livraison si pas Validation\n  useEffect(() => {\n    if (callStatus !== 'Validation') {\n      setDateLivraison('');\n    }\n  }, [callStatus]);\n\n  const formatTime = (s) => {\n    const m = Math.floor(s / 60).toString().padStart(2, '0');\n    const sec = (s % 60).toString().padStart(2, '0');\n    return `${m}:${sec}`;\n  };\n  const formatTimeHMS = (s) => {\n    const h = Math.floor(s / 3600).toString().padStart(2, '0');\n    const m = Math.floor((s % 3600) / 60).toString().padStart(2, '0');\n    const sec = (s % 60).toString().padStart(2, '0');\n    return `${h}:${m}:${sec}`;\n  };\n\n  // Ajout d'une ligne au panier\n  const addCartLine = () => {\n    setCart([...cart, { produit: '', prix: '', quantite: '', frais: '', tva: '' }]);\n  };\n  // Modification d'une ligne du panier\n  const updateCartLine = (idx, field, value) => {\n    const newCart = cart.map((item, i) =>\n      i === idx ? { ...item, [field]: value } : item\n    );\n    setCart(newCart);\n  };\n  // Déconnexion\n  const handleLogout = () => {\n    window.location.href = '/';\n  };\n  // Enregistrer la commande\n  const handleSaveOrder = async (e) => {\n    e.preventDefault();\n    setFormError('');\n    if (callStatus === 'Validation' && !dateLivraison) {\n      setFormError('Veuillez choisir la date de livraison.');\n      return;\n    }\n    // Validation selon le statut\n    if (callStatus === 'Rappel') {\n      if (!recallDate) {\n        setFormError('Veuillez choisir la date et l\\'heure du rappel.');\n        return;\n      }\n      // Vérifier que la date est dans les 3 jours\n      const now = new Date();\n      const recall = new Date(recallDate);\n      const diff = (recall - now) / (1000 * 60 * 60 * 24);\n      if (diff < 0 || diff > 3) {\n        setFormError('La date de rappel doit être dans les 3 jours à venir.');\n        return;\n      }\n    }\n    if (callStatus === 'Refus' && !refusalReason.trim()) {\n      setFormError('Veuillez indiquer la raison du refus.');\n      return;\n    }\n    if (callStatus === 'Poubelle' && !trashReason.trim()) {\n      setFormError('Veuillez indiquer la raison pour la poubelle.');\n      return;\n    }\n\n    // Générer un ID unique pour la commande\n    const timestamp = new Date().getTime();\n    const random = Math.floor(Math.random() * 1000);\n    const orderId = `CMD${timestamp}${random}`;\n\n    // Construction de la commande à envoyer à l'admin\n    const orderToSend = {\n      id: orderId,\n      nom: client.name.split(' ')[0] || '',\n      prenom: client.name.split(' ').slice(1).join(' ') || '',\n      phone: client.phone,\n      adresse: Object.values(address).filter(Boolean).join(', '),\n      date: dateLivraison || new Date().toISOString().split('T')[0],\n      produit: cart[0]?.produit || '',\n      quantite: parseInt(cart[0]?.quantite) || 1,\n      prix: parseFloat(cart[0]?.prix) || 0,\n      statut: callStatus === 'Validation' ? 'Validée' : 'En attente',\n      logistique: false,\n      operateur: 'Opérateur', // Ajout de l'opérateur\n      canal: 'Téléphone', // Ajout du canal\n      historique: [\n        {\n          date: new Date().toISOString().split('T')[0],\n          action: 'Création',\n          utilisateur: 'Opérateur'\n        }\n      ]\n    };\n\n    try {\n      const response = await fetch('/api/orders', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(orderToSend)\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Erreur lors de l\\'enregistrement de la commande');\n      }\n\n      const savedOrder = await response.json();\n      setOrders(prevOrders => [...prevOrders, savedOrder]);\n      setOrderSaved(true);\n      setFormError(''); // Réinitialiser les erreurs\n      setTimeout(() => setOrderSaved(false), 2000);\n      setCallState('ringing'); // relance un appel\n      setRecallDate('');\n      setRefusalReason('');\n      setTrashReason('');\n      setDateLivraison('');\n      \n      // Réinitialiser le panier\n      setCart([{ produit: '', prix: '', quantite: '', frais: '', tva: '' }]);\n      \n    } catch (err) {\n      console.error('Erreur lors de l\\'enregistrement:', err);\n      setFormError(err.message || 'Erreur lors de l\\'enregistrement de la commande. Veuillez réessayer.');\n    }\n  };\n\n  // Fonction de recherche d'adresse\n  const searchAddress = async (query) => {\n    if (query.length < 3) {\n      setAddressSuggestions([]);\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        `https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(query)}&limit=5`\n      );\n      const data = await response.json();\n      setAddressSuggestions(data.features || []);\n      setShowSuggestions(true);\n    } catch (error) {\n      console.error('Erreur lors de la recherche d\\'adresse:', error);\n      setAddressSuggestions([]);\n    }\n  };\n\n  // Sélection d'une adresse\n  const selectAddress = (feature) => {\n    const properties = feature.properties;\n    setAddress({\n      ...address,\n      numero: properties.housenumber || '',\n      rue: properties.street || '',\n      codePostal: properties.postcode || '',\n      ville: properties.city || '',\n      region: properties.context || ''\n    });\n    setSearchQuery(`${properties.housenumber || ''} ${properties.street || ''}, ${properties.postcode || ''} ${properties.city || ''}`);\n    setShowSuggestions(false);\n  };\n\n  return (\n    <div className=\"crm-legacy-container\">\n      {/* Onglets + Déconnexion */}\n      <div className=\"crm-header-bar\">\n        <div className=\"crm-tabs\">\n          {tabs.map(tab => (\n            <div\n              key={tab}\n              className={`crm-tab${activeTab === tab ? ' active' : ''}`}\n              onClick={() => setActiveTab(tab)}\n            >\n              {tab}\n            </div>\n          ))}\n        </div>\n        <button className=\"btn-logout\" onClick={handleLogout}>Déconnexion</button>\n      </div>\n      <div className=\"crm-brand\">\n        <span className=\"crm-brand-main\">C-<span className=\"crm-brand-accent\">INNOVATECH</span> Solutions</span>\n      </div>\n      <div className=\"crm-legacy-content\">\n        {activeTab === 'Panier' ? (\n          <div style={{maxWidth: 950, margin: '0 auto', textAlign:'left', background:'#fff', borderRadius:16, boxShadow:'0 2px 12px rgba(0,0,0,0.07)', padding:'32px 28px 24px 28px', border:'1.5px solid #e0e0e0'}}>\n            <h2 style={{fontWeight:800, fontSize:'1.6rem', marginBottom:32, textAlign:'center', letterSpacing:1}}>Mes commandes</h2>\n            {apiError && (\n              <div style={{color:'#e53935', marginBottom:16, padding:12, background:'#ffebee', borderRadius:8, border:'1px solid #ffcdd2'}}>\n                {apiError}\n              </div>\n            )}\n            <div style={{overflowX:'auto'}}>\n              <table style={{width:'100%', borderCollapse:'separate', borderSpacing:0, fontSize:'0.99rem', background:'#fff', borderRadius:10}}>\n                <thead>\n                  <tr style={{background:'#f7f8fa'}}>\n                    <th style={{padding:'10px 8px', fontWeight:700, color:'#222'}}>ID</th>\n                    <th style={{padding:'10px 8px', fontWeight:700, color:'#222'}}>Client</th>\n                    <th style={{padding:'10px 8px', fontWeight:700, color:'#222'}}>Produit</th>\n                    <th style={{padding:'10px 8px', fontWeight:700, color:'#222'}}>Date</th>\n                    <th style={{padding:'10px 8px', fontWeight:700, color:'#222'}}>Statut</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {orders.map(order => (\n                    <tr key={order.id} style={{borderBottom:'1px solid #f0f0f0'}}>\n                      <td style={{padding:'12px 8px'}}>{order.id}</td>\n                      <td style={{padding:'12px 8px'}}>{order.nom} {order.prenom}</td>\n                      <td style={{padding:'12px 8px'}}>{order.produit}</td>\n                      <td style={{padding:'12px 8px'}}>{new Date(order.date).toLocaleDateString('fr-FR')}</td>\n                      <td style={{padding:'12px 8px'}}>\n                        <span style={{\n                          padding: '4px 8px',\n                          borderRadius: 12,\n                          fontSize: '0.9rem',\n                          fontWeight: 600,\n                          background: \n                            order.statut === 'En attente' ? '#fff3e0' :\n                            order.statut === 'Validée' ? '#e8f5e9' :\n                            order.statut === 'Expédiée' ? '#e3f2fd' :\n                            order.statut === 'Livrée' ? '#f3e5f5' :\n                            '#ffebee',\n                          color: \n                            order.statut === 'En attente' ? '#e65100' :\n                            order.statut === 'Validée' ? '#2e7d32' :\n                            order.statut === 'Expédiée' ? '#1565c0' :\n                            order.statut === 'Livrée' ? '#6a1b9a' :\n                            '#c62828'\n                        }}>\n                          {order.statut}\n                        </span>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* Colonne de gauche */}\n            <div style={{minWidth: 320, maxWidth: 340, marginRight: 32}}>\n              {/* Bloc appel */}\n              <div className=\"phonecall-box\">\n                <div style={{display:'flex',alignItems:'center',gap:10}}>\n                  <span style={{fontSize: '2rem', color:'#e53935'}}>⏰</span>\n                  <span style={{fontWeight:'bold',color:'#e53935'}}>Appel entrant...</span>\n                </div>\n                {callState === 'ringing' && (\n                  <div style={{marginTop:12,display:'flex',gap:12}}>\n                    <button className=\"btn-phonecall green big\" onClick={() => setCallState('in-call')}>Décrocher</button>\n                    <button className=\"btn-phonecall red big\" onClick={() => setCallState('ended')}>Raccrocher</button>\n                  </div>\n                )}\n                {callState === 'in-call' && (\n                  <div style={{marginTop:12}}>\n                    <span className=\"phonecall-inprogress-label\">En appel…</span>\n                    <span className=\"phonecall-timer\">{formatTime(callSeconds)}</span>\n                    <button className=\"btn-phonecall red big\" style={{marginLeft:18}} onClick={() => setCallState('ended')}>Raccrocher</button>\n                  </div>\n                )}\n                {callState === 'ended' && (\n                  <div style={{marginTop:12}}>\n                    <span className=\"phonecall-ended\">Appel terminé</span>\n                    <button className=\"btn-newcall\" style={{marginLeft:18}} onClick={() => setCallState('ringing')}>Simuler un appel</button>\n                  </div>\n                )}\n              </div>\n              {/* Contrôle */}\n              <div className=\"crm-controls-block-belowcall\">\n                <div className=\"crm-section-title\">Contrôle</div>\n                <div className=\"crm-controls\">\n                  {statusList.map(s => {\n                    const time = statusTimes[s.label] || 0;\n                    const isCurrent = status === s.label;\n                    const isLate = s.max && time >= s.max;\n                    return (\n                      <button\n                        key={s.label}\n                        type=\"button\"\n                        className={`btn-control ${s.label.normalize('NFD').replace(/[\u0000-\\u036f]/g, '').toLowerCase().replace(/ /g, '')}${isCurrent ? ' selected' : ''}`}\n                        onClick={() => setStatus(s.label)}\n                      >\n                        {s.label}\n                        <span className={`status-timer${isLate ? ' late' : ''}`}>{formatTimeHMS(time)}</span>\n                        {isLate && s.label === 'Pause' && <span className=\"status-warning\">⏰ max 1h30 !</span>}\n                        {isLate && s.label === 'Connecté' && <span className=\"status-warning\">⏰ max 20h !</span>}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n            {/* Colonne de droite : Formulaire */}\n            <form className=\"crm-form\" onSubmit={handleSaveOrder}>\n              <div className=\"crm-section-flex\">\n                <div className=\"crm-section-block\">\n                  <div className=\"crm-section-title\">Informations client</div>\n                  <div className=\"crm-grid-2\">\n                    <div className=\"crm-field\">\n                      <label>Nom et prénom</label>\n                      <input type=\"text\" value={client.name} onChange={e => setClient({ ...client, name: e.target.value })} />\n                    </div>\n                    <div className=\"crm-field\">\n                      <label>Numéro de téléphone</label>\n                      <input type=\"text\" value={client.phone} onChange={e => setClient({ ...client, phone: e.target.value })} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"crm-section-block\">\n                <div style={{display: 'flex', alignItems: 'center', gap: 12, marginBottom: 12}}>\n                  <div className=\"crm-section-title\" style={{marginBottom: 0}}>Adresse de livraison</div>\n                  <div className=\"crm-field\" style={{ minWidth: 220, width: 280, marginBottom: 0, position: 'relative' }}>\n                    <label style={{display:'none'}}>Rechercher une adresse</label>\n                    <input\n                      type=\"text\"\n                      value={searchQuery}\n                      onChange={(e) => {\n                        setSearchQuery(e.target.value);\n                        searchAddress(e.target.value);\n                      }}\n                      placeholder=\"Rechercher une adresse...\"\n                      style={{ width: '100%' }}\n                    />\n                    {showSuggestions && addressSuggestions.length > 0 && (\n                      <div className=\"address-suggestions\">\n                        {addressSuggestions.map((suggestion, index) => (\n                          <div\n                            key={index}\n                            className=\"suggestion-item\"\n                            onClick={() => selectAddress(suggestion)}\n                          >\n                            {suggestion.properties.label}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"crm-grid-4\">\n                  <div className=\"crm-field\">\n                    <label>Rue</label>\n                    <input type=\"text\" value={address.rue} readOnly />\n                  </div>\n                  <div className=\"crm-field\">\n                    <label>Numéro</label>\n                    <input type=\"text\" value={address.numero} readOnly />\n                  </div>\n                  <div className=\"crm-field\">\n                    <label>Code postal</label>\n                    <input type=\"text\" value={address.codePostal} readOnly />\n                  </div>\n                  <div className=\"crm-field\">\n                    <label>Ville</label>\n                    <input type=\"text\" value={address.ville} readOnly />\n                  </div>\n                </div>\n                <div className=\"crm-grid-3\">\n                  <div className=\"crm-field\">\n                    <label>Région</label>\n                    <input type=\"text\" value={address.region} onChange={e => setAddress({ ...address, region: e.target.value })} />\n                  </div>\n                  <div className=\"crm-field\">\n                    <label>Appartement</label>\n                    <input type=\"text\" value={address.appartement} onChange={e => setAddress({ ...address, appartement: e.target.value })} />\n                  </div>\n                  <div className=\"crm-field\">\n                    <label>Entrée</label>\n                    <input type=\"text\" value={address.entree} onChange={e => setAddress({ ...address, entree: e.target.value })} />\n                  </div>\n                </div>\n              </div>\n              <div className=\"crm-section-block\">\n                <div className=\"crm-section-title\">Statut après l'appel</div>\n                <div className=\"crm-field\" style={{maxWidth: '300px'}}>\n                  <select value={callStatus} onChange={e => setCallStatus(e.target.value)}>\n                    {callStatusList.map(s => <option key={s}>{s}</option>)}\n                  </select>\n                </div>\n                {/* Champs dynamiques selon le statut */}\n                {callStatus === 'Rappel' && (\n                  <div className=\"crm-field\" style={{maxWidth: 320}}>\n                    <label>Date et heure du rappel (dans les 3 jours)</label>\n                    <input\n                      type=\"datetime-local\"\n                      value={recallDate}\n                      min={new Date().toISOString().slice(0,16)}\n                      max={(() => {\n                        const d = new Date();\n                        d.setDate(d.getDate() + 3);\n                        return d.toISOString().slice(0,16);\n                      })()}\n                      onChange={e => setRecallDate(e.target.value)}\n                    />\n                  </div>\n                )}\n                {callStatus === 'Refus' && (\n                  <div className=\"crm-field\" style={{maxWidth: 320}}>\n                    <label>Raison du refus</label>\n                    <input\n                      type=\"text\"\n                      value={refusalReason}\n                      onChange={e => setRefusalReason(e.target.value)}\n                      placeholder=\"Indiquez la raison du refus\"\n                    />\n                  </div>\n                )}\n                {callStatus === 'Poubelle' && (\n                  <div className=\"crm-field\" style={{maxWidth: 320}}>\n                    <label>Raison pour la poubelle</label>\n                    <input\n                      type=\"text\"\n                      value={trashReason}\n                      onChange={e => setTrashReason(e.target.value)}\n                      placeholder=\"Indiquez la raison\"\n                    />\n                  </div>\n                )}\n                {callStatus === 'Validation' && (\n                  <div className=\"crm-field\" style={{maxWidth: 320}}>\n                    <label>Date de livraison prévue</label>\n                    <input type=\"date\" value={dateLivraison} min={getMinDeliveryDate()} max={getMaxDeliveryDate()} onChange={e => setDateLivraison(e.target.value)} required />\n                  </div>\n                )}\n                {formError && <div style={{color:'#e53935',marginTop:8,fontWeight:600}}>{formError}</div>}\n              </div>\n              <div className=\"crm-section-block\">\n                <div className=\"crm-section-title\">Panier</div>\n                <div className=\"crm-grid-5\">\n                  {cart.map((item, idx) => (\n                    <React.Fragment key={idx}>\n                      <div className=\"crm-field\">\n                        <label>Nom de produit</label>\n                        <input type=\"text\" value={item.produit} onChange={e => updateCartLine(idx, 'produit', e.target.value)} />\n                      </div>\n                      <div className=\"crm-field\">\n                        <label>Prix</label>\n                        <input type=\"number\" value={item.prix} onChange={e => updateCartLine(idx, 'prix', e.target.value)} />\n                      </div>\n                      <div className=\"crm-field\">\n                        <label>Quantité</label>\n                        <input type=\"number\" value={item.quantite} onChange={e => updateCartLine(idx, 'quantite', e.target.value)} />\n                      </div>\n                      <div className=\"crm-field\">\n                        <label>Frais de livraison</label>\n                        <input type=\"number\" value={item.frais} onChange={e => updateCartLine(idx, 'frais', e.target.value)} />\n                      </div>\n                      <div className=\"crm-field\">\n                        <label>TVA</label>\n                        <input type=\"number\" value={item.tva} onChange={e => updateCartLine(idx, 'tva', e.target.value)} />\n                      </div>\n                    </React.Fragment>\n                  ))}\n                </div>\n                <button type=\"button\" className=\"crm-btn-add\" onClick={addCartLine}>Ajouter un produit</button>\n              </div>\n              {showTreatmentTimer && (\n                <div className=\"treatment-timer-block\">\n                  <span className=\"treatment-timer-label\">Temps de traitement de la commande :</span>\n                  <span className={`treatment-timer-value${treatmentSeconds >= 600 ? ' late' : ''}`}>{formatTime(treatmentSeconds)}</span>\n                  {treatmentSeconds >= 600 && <span className=\"treatment-timer-warning\">⏰ Dépassement !</span>}\n                </div>\n              )}\n              <div className=\"crm-section-block\" style={{textAlign:'center', marginTop: 18}}>\n                <button type=\"submit\" className=\"btn-save-order\">Enregistrer la commande</button>\n                {orderSaved && <span className=\"order-saved-msg\">Commande enregistrée !</span>}\n              </div>\n            </form>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CRM;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}